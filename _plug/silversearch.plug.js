var Gn=Object.create;var ce=Object.defineProperty;var Jn=Object.getOwnPropertyDescriptor;var Xn=Object.getOwnPropertyNames;var Hn=Object.getPrototypeOf,Qn=Object.prototype.hasOwnProperty;var U=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Y=(n,e)=>{for(var t in e)ce(n,t,{get:e[t],enumerable:!0})},Zn=(n,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Xn(e))!Qn.call(n,r)&&r!==t&&ce(n,r,{get:()=>e[r],enumerable:!(s=Jn(e,r))||s.enumerable});return n};var ze=(n,e,t)=>(t=n!=null?Gn(Hn(n)):{},Zn(e||!n||!n.__esModule?ce(t,"default",{value:n,enumerable:!0}):t,n));var xn=U((zb,hn)=>{var Tr=/\r\n?|\n/g,yr=/\0/g;function hr(n){let e;return e=n.replace(Tr,`
`),e=e.replace(yr,"\uFFFD"),e}hn.exports={normalize:hr}});var kn=U((Ub,gn)=>{var xr=(n,e)=>{let t=0,s=0,r=0;for(;t<n.length&&s<e.length;)n[t]===e[s]&&(r+=1,t+=1),s+=1;return n.slice(0,r)};gn.exports={maxMatchingSubstring:xr}});var An=U((Gb,Sn)=>{var{normalize:gr}=xn(),{maxMatchingSubstring:kr}=kn(),On=n=>n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),wr=({link:n,startSyntax:e,endSyntax:t,links:s})=>{if(n.startsWith(e)){if(n.endsWith(t))return!1;if(n.includes(t)){let u=n.replace(/.?http/g,"http").substring(0,n.lastIndexOf(t)).replace(new RegExp(`\\${t}$`,"g"),"");return!s.some(a=>a.href===u)}}return!0},Or=n=>{let e=/mailto:([^\s[;]+)/g;return n.map(t=>t.href.match(e)||t.href.includes("@")?{...t,href:t.href.startsWith("mailto")?t.href:`mailto:${t.href}`,type:"email"}:t)},wn=n=>n.startsWith("http")||n.startsWith("/")||n.includes("@"),Ve=({line:n,url:e,lineLinks:t=[]})=>{let s=n?.match(new RegExp(On(e),"g"))?.length||0,r=t?.reduce((o,u)=>o+(u.href.includes(e)?1:0)+(u.format==="[]()"&&u.text.includes(e)?1:0),0);return s>0&&r<s},Sr=({line:n,links:e,link:t})=>{let s="",r=(t?.match(/https:\/\/.*/g)?.[0]||"").replace("https://","");for(let o of e){let u=kr(r,o.href);u.length>s.length&&(s=u)}if(s.length>0){let o=n?.match(new RegExp(On(s),"g"))?.length||0,u=e?.reduce((a,I)=>a+(I.href.includes(s)?1:0)+(I.format==="[]()"&&I.text.includes(s)?1:0),0);return o>0&&u<o}return!0},Ar=n=>{let e=gr(n).split(`
`),t=/.?\[([^\]]*)\]\(([^\][]*)\)/g,s=/<[^>]*>/g,r=/.?\(([^)]*)\)/g,o=/.?https?:\/\/[^\s[;]+/g,u=[];for(let a of e){let I=a.match(t)||[],p=a.match(s)||[],l=a.match(r)||[],d=a.match(o)||[],m=[];for(let T of I)if(!T.startsWith("!")){let h=T?.replace(/^.?\[/g,"[")||"",y=h?.match(/\(/g)?.length||0;(h?.match(/\)/g)?.length||0)>y&&(h=h?.replace(/\)$/g,"")||""),h.includes(") (")&&(h=h.replace(/\) \(.*/g,")"));let g=/\[([^\]]*)\]/,k=h?.match(g)?.[1]?.trim()||"",R=h?.replace(g,"")?.match(/\(([^\][]*)\)$/)?.[1]?.trim()||"",j={text:k,href:R,line:a,raw:h,type:"link",format:"[]()"};u.push(j),m.push(j)}for(let T of p){let h=T.match(/<([^>]*)>/)[1]?.trim();if(wn(h)){let y=h;if(Ve({line:a,url:y,lineLinks:m})){let x={text:h,href:y,line:a,raw:T,type:"link",format:"<>"};u.push(x),m.push(x)}}}for(let T of l){let h=T.replace(/^.?\(/g,"("),y=h.match(/\(([^)]*)\)/)[1].trim();if(!T.startsWith("]")&&wn(y)){let x=y;if(Ve({line:a,url:x,lineLinks:m})){let g={text:y,href:x,line:a,raw:h,type:"link",format:"()"};u.push(g),m.push(g)}}}for(let T of d)if([{start:"[",end:"]"},{start:"<",end:">"},{start:"(",end:")"}].every(y=>wr({link:T,startSyntax:y.start,endSyntax:y.end,links:m}))&&Sr({line:a,links:m,link:T})){let y=T.replace(/^.?http/g,"http"),x=y;if(Ve({line:a,url:x,lineLinks:m})){let g={text:y,href:x,line:a,raw:y,type:"link",format:"raw"};u.push(g),m.push(g)}}}return Or(u)};Sn.exports={extractMdLinks:Ar}});var Rn=U(Ie=>{Ie.parse=function(n,e){if(e?e.offsets=typeof e.offsets>"u"?!0:e.offsets:e={offsets:!0},n||(n=""),n.indexOf(":")===-1&&!e.tokenize)return n;if(!e.keywords&&!e.ranges&&!e.tokenize)return n;var t={text:[]};e.offsets&&(t.offsets=[]);for(var s={},r=[],o=/(\S+:'(?:[^'\\]|\\.)*')|(\S+:"(?:[^"\\]|\\.)*")|(-?"(?:[^"\\]|\\.)*")|(-?'(?:[^'\\]|\\.)*')|\S+|\S+:\S+/g,u;(u=o.exec(n))!==null;){var m=u[0],a=m.indexOf(":");if(a!==-1){var I=m.split(":"),p=m.slice(0,a),l=m.slice(a+1);l=l.replace(/^\"|\"$|^\'|\'$/g,""),l=(l+"").replace(/\\(.?)/g,function(_,M){switch(M){case"\\":return"\\";case"0":return"\0";case"":return"";default:return M}}),r.push({keyword:p,value:l,offsetStart:u.index,offsetEnd:u.index+m.length})}else{var d=!1;m[0]==="-"&&(d=!0,m=m.slice(1)),m=m.replace(/^\"|\"$|^\'|\'$/g,""),m=(m+"").replace(/\\(.?)/g,function(_,M){switch(M){case"\\":return"\\";case"0":return"\0";case"":return"";default:return M}}),d?s.text?(s.text instanceof Array||(s.text=[s.text]),s.text.push(m)):s.text=m:r.push({text:m,offsetStart:u.index,offsetEnd:u.index+m.length})}}r.reverse();for(var m;m=r.pop();)if(m.text)t.text.push(m.text),e.offsets&&t.offsets.push(m);else{var p=m.keyword;e.keywords=e.keywords||[];var T=!1,h=!1;if(!/^-/.test(p))T=e.keywords.indexOf(p)!==-1;else if(p[0]==="-"){var y=p.slice(1);T=e.keywords.indexOf(y)!==-1,T&&(p=y,h=!0)}e.ranges=e.ranges||[];var x=e.ranges.indexOf(p)!==-1;if(T){e.offsets&&t.offsets.push({keyword:p,value:m.value,offsetStart:h?m.offsetStart+1:m.offsetStart,offsetEnd:m.offsetEnd});var g=m.value;if(g.length){var k=g.split(",");h?s[p]?s[p]instanceof Array?k.length>1?s[p]=s[p].concat(k):s[p].push(g):(s[p]=[s[p]],s[p].push(g)):k.length>1?s[p]=k:e.alwaysArray?s[p]=[g]:s[p]=g:t[p]?t[p]instanceof Array?k.length>1?t[p]=t[p].concat(k):t[p].push(g):(t[p]=[t[p]],t[p].push(g)):k.length>1?t[p]=k:e.alwaysArray?t[p]=[g]:t[p]=g}}else if(x){e.offsets&&t.offsets.push(m);var g=m.value,R=g.split("-");t[p]={},R.length===2?(t[p].from=R[0],t[p].to=R[1]):!R.length%2||(t[p].from=g)}else{var j=m.keyword+":"+m.value;t.text.push(j),e.offsets&&t.offsets.push({text:j,offsetStart:m.offsetStart,offsetEnd:m.offsetEnd})}}return t.text.length?e.tokenize||(t.text=t.text.join(" ").trim()):delete t.text,t.exclude=s,t};Ie.stringify=function(n,e,t){if(e||(e={offsets:!0}),!n)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.join(" ");if(!Object.keys(n).length)return"";if(Object.keys(n).length===3&&n.text&&n.offsets&&n.exclude&&typeof n.text=="string")return n.text;t||(t="");var s=function(a){return a.indexOf(" ")>-1?JSON.stringify(a):a},r=function(a){return t+a},o=[];if(n.text){var u=[];typeof n.text=="string"?u.push(n.text):u.push.apply(u,n.text),u.length>0&&o.push(u.map(s).map(r).join(" "))}return e.keywords&&e.keywords.forEach(function(a){if(n[a]){var I=[];typeof n[a]=="string"?I.push(n[a]):I.push.apply(I,n[a]),I.length>0&&o.push(r(a+":"+I.map(s).join(",")))}}),e.ranges&&e.ranges.forEach(function(a){if(n[a]){var I=n[a].from,p=n[a].to;p&&(I=I+"-"+p),I&&o.push(r(a+":"+I))}}),n.exclude&&Object.keys(n.exclude).length>0&&o.push(Ie.stringify(n.exclude,e,"-")),o.join(" ")}});var _n=U((TE,jn)=>{jn.exports=Rn()});function Ue(n){let e=atob(n),t=e.length,s=new Uint8Array(t);for(let r=0;r<t;r++)s[r]=e.charCodeAt(r);return s}function fe(n){typeof n=="string"&&(n=new TextEncoder().encode(n));let e="",t=n.byteLength;for(let s=0;s<t;s++)e+=String.fromCharCode(n[s]);return btoa(e)}var G=n=>{throw new Error("Not initialized yet")},Te=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var le=new Map,de=0;Te&&(globalThis.syscall=async(n,...e)=>await new Promise((t,s)=>{de++,le.set(de,{resolve:t,reject:s}),G({type:"sys",id:de,name:n,args:e})}));function Ge(n,e,t){Te&&(G=t,self.addEventListener("message",s=>{(async()=>{let r=s.data;switch(r.type){case"inv":{let o=n[r.name];if(!o)throw new Error(`Function not loaded: ${r.name}`);try{let u=await Promise.resolve(o(...r.args||[]));G({type:"invr",id:r.id,result:u})}catch(u){console.error("An exception was thrown as a result of invoking function",r.name,"error:",u.message),G({type:"invr",id:r.id,error:u.message})}}break;case"sysr":{let o=r.id,u=le.get(o);if(!u)throw Error("Invalid request id");le.delete(o),r.error?u.reject(new Error(r.error)):u.resolve(r.result)}break}})().catch(console.error)}),G({type:"manifest",manifest:e}))}async function Yn(n,e){if(typeof n!="string"){let t=new Uint8Array(await n.arrayBuffer()),s=t.length>0?fe(t):void 0;e={method:n.method,headers:Object.fromEntries(n.headers.entries()),base64Body:s},n=n.url}return syscall("sandboxFetch.fetch",n,e)}globalThis.nativeFetch=globalThis.fetch;function et(){globalThis.fetch=async function(n,e){let t=e&&e.body?fe(new Uint8Array(await new Response(e.body).arrayBuffer())):void 0,s=await Yn(n,e&&{method:e.method,headers:e.headers,base64Body:t});return new Response(s.base64Body?Ue(s.base64Body):null,{status:s.status,headers:s.headers})}}Te&&et();var B={};Y(B,{alert:()=>Ct,configureVimMode:()=>es,confirm:()=>Wt,copyToClipboard:()=>Xt,deleteLine:()=>Ht,dispatch:()=>qt,downloadFile:()=>Ot,filterBox:()=>Bt,flashNotification:()=>At,fold:()=>Lt,foldAll:()=>$t,getCurrentEditor:()=>ut,getCurrentPage:()=>nt,getCurrentPageMeta:()=>tt,getCurrentPath:()=>st,getCursor:()=>at,getRecentlyOpenedPages:()=>rt,getSelection:()=>pt,getText:()=>ot,getUiOption:()=>Vt,goHistory:()=>wt,hidePanel:()=>Et,insertAtCursor:()=>_t,insertAtPos:()=>Mt,invokeCommand:()=>mt,moveCursor:()=>Rt,moveCursorToLine:()=>jt,moveLineDown:()=>Zt,moveLineUp:()=>Qt,navigate:()=>ft,newWindow:()=>kt,openCommandPalette:()=>lt,openPageNavigator:()=>dt,openSearchPanel:()=>Jt,openUrl:()=>gt,prompt:()=>Dt,rebuildEditorState:()=>ht,redo:()=>Gt,reloadConfigAndCommands:()=>xt,reloadPage:()=>Tt,reloadUI:()=>yt,replaceRange:()=>vt,save:()=>ct,sendMessage:()=>ns,setSelection:()=>It,setText:()=>it,setUiOption:()=>Nt,showPanel:()=>bt,showProgress:()=>Pt,toggleFold:()=>Kt,undo:()=>Ut,unfold:()=>Ft,unfoldAll:()=>zt,uploadFile:()=>St,vimEx:()=>Yt});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});function c(n,...e){return globalThis.syscall(n,...e)}function nt(){return c("editor.getCurrentPage")}function tt(){return c("editor.getCurrentPageMeta")}function st(n=!1){return c("editor.getCurrentPath",n)}function rt(){return c("editor.getRecentlyOpenedPages")}function ut(){return c("editor.getCurrentEditor")}function ot(){return c("editor.getText")}function it(n,e=!1){return c("editor.setText",n,e)}function at(){return c("editor.getCursor")}function pt(){return c("editor.getSelection")}function It(n,e){return c("editor.setSelection",n,e)}function mt(n,e){return c("editor.invokeCommand",n,e)}function ct(){return c("editor.save")}function ft(n,e=!1,t=!1){return c("editor.navigate",n,e,t)}function dt(n="page"){return c("editor.openPageNavigator",n)}function lt(){return c("editor.openCommandPalette")}function Tt(){return c("editor.reloadPage")}function yt(){return c("editor.reloadUI")}function ht(){return c("editor.rebuildEditorState")}function xt(){return c("editor.reloadConfigAndCommands")}function gt(n,e=!1){return c("editor.openUrl",n,e)}function kt(){return c("editor.newWindow")}function wt(n){return c("editor.goHistory",n)}function Ot(n,e){return c("editor.downloadFile",n,e)}function St(n,e){return c("editor.uploadFile",n,e)}function At(n,e="info"){return c("editor.flashNotification",n,e)}function Bt(n,e,t="",s=""){return c("editor.filterBox",n,e,t,s)}function bt(n,e,t,s=""){return c("editor.showPanel",n,e,t,s)}function Et(n){return c("editor.hidePanel",n)}function Pt(n,e){return c("editor.showProgress",n,e)}function Mt(n,e){return c("editor.insertAtPos",n,e)}function vt(n,e,t){return c("editor.replaceRange",n,e,t)}function Rt(n,e=!1){return c("editor.moveCursor",n,e)}function jt(n,e=1,t=!1){return c("editor.moveCursorToLine",n,e,t)}function _t(n,e=!1,t=!1){return c("editor.insertAtCursor",n,e,t)}function qt(n){return c("editor.dispatch",n)}function Dt(n,e=""){return c("editor.prompt",n,e)}function Wt(n){return c("editor.confirm",n)}function Ct(n){return c("editor.alert",n)}function Vt(n){return c("editor.getUiOption",n)}function Nt(n,e){return c("editor.setUiOption",n,e)}function Lt(){return c("editor.fold")}function Ft(){return c("editor.unfold")}function Kt(){return c("editor.toggleFold")}function $t(){return c("editor.foldAll")}function zt(){return c("editor.unfoldAll")}function Ut(){return c("editor.undo")}function Gt(){return c("editor.redo")}function Jt(){return c("editor.openSearchPanel")}function Xt(n){return c("editor.copyToClipboard",n)}function Ht(){return c("editor.deleteLine")}function Qt(){return c("editor.moveLineUp")}function Zt(){return c("editor.moveLineDown")}function Yt(n){return c("editor.vimEx",n)}function es(){return c("editor.configureVimMode")}function ns(n,e){return c("editor.sendMessage",n,e)}var V={};Y(V,{deleteDocument:()=>ds,deleteFile:()=>xs,deletePage:()=>as,fileExists:()=>gs,getDocumentMeta:()=>ms,getFileMeta:()=>ys,getPageMeta:()=>rs,listDocuments:()=>Is,listFiles:()=>ls,listPages:()=>ss,listPlugs:()=>ps,pageExists:()=>us,readDocument:()=>cs,readFile:()=>Ts,readPage:()=>os,writeDocument:()=>fs,writeFile:()=>hs,writePage:()=>is});function ss(){return c("space.listPages")}function rs(n){return c("space.getPageMeta",n)}function us(n){return c("space.pageExists",n)}function os(n){return c("space.readPage",n)}function is(n,e){return c("space.writePage",n,e)}function as(n){return c("space.deletePage",n)}function ps(){return c("space.listPlugs")}function Is(){return c("space.listDocuments")}function ms(n){return c("space.getDocumentMeta",n)}function cs(n){return c("space.readDocument",n)}function fs(n,e){return c("space.writeDocument",n,e)}function ds(n){return c("space.deleteDocument",n)}function ls(){return c("space.listFiles")}function Ts(n){return c("space.readFile",n)}function ys(n){return c("space.getFileMeta",n)}function hs(n,e){return c("space.writeFile",n,e)}function xs(n){return c("space.deleteFile",n)}function gs(n){return c("space.fileExists",n)}var ee={};Y(ee,{getConfig:()=>Es,getMode:()=>Bs,getVersion:()=>bs,invokeCommand:()=>ws,invokeFunction:()=>ks,listCommands:()=>Os,listSyscalls:()=>Ss,reloadPlugs:()=>As,wipeClient:()=>Ps});function ks(n,...e){return c("system.invokeFunction",n,...e)}function ws(n,e){return c("system.invokeCommand",n,e)}function Os(){return c("system.listCommands")}function Ss(){return c("system.listSyscalls")}function As(){return c("system.reloadPlugs")}function Bs(){return c("system.getMode")}function bs(){return c("system.getVersion")}function Es(n,e=void 0){return c("system.getConfig",n,e)}function Ps(n=!1){return c("system.wipeClient",n)}var N={};Y(N,{del:()=>Rs,get:()=>vs,set:()=>Ms});function Ms(n,e){return c("clientStore.set",n,e)}function vs(n){return c("clientStore.get",n)}function Rs(n){return c("clientStore.delete",n)}var ye='var Gl=Object.defineProperty;var cr=q=>{throw TypeError(q)};var Ql=(q,P,D)=>P in q?Gl(q,P,{enumerable:!0,configurable:!0,writable:!0,value:D}):q[P]=D;var ut=(q,P,D)=>Ql(q,typeof P!="symbol"?P+"":P,D),nn=(q,P,D)=>P.has(q)||cr("Cannot "+D);var k=(q,P,D)=>(nn(q,P,"read from private field"),D?D.call(q):P.get(q)),Y=(q,P,D)=>P.has(q)?cr("Cannot add the same private member more than once"):P instanceof WeakSet?P.add(q):P.set(q,D),J=(q,P,D,Me)=>(nn(q,P,"write to private field"),Me?Me.call(q,D):P.set(q,D),D),De=(q,P,D)=>(nn(q,P,"access private method"),D);(function(){"use strict";var je,Ke,pe,rt,lt,qe,Ye,Re,me,Be,it,at,ne,vr,St,rn,or;var P=Array.isArray,D=Array.prototype.indexOf,Me=Array.from,Pt=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,dr=Object.prototype,_r=Array.prototype,hr=Object.getPrototypeOf,ln=Object.isExtensible;const gr=()=>{};function an(e){for(var t=0;t<e.length;t++)e[t]()}function pr(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}const B=2,qt=4,Rt=8,We=16,se=32,ye=64,sn=128,H=256,ft=512,N=1024,$=2048,fe=4096,ee=8192,Ee=16384,At=32768,ot=65536,un=1<<17,mr=1<<18,Ct=1<<19,fn=1<<20,Dt=1<<21,Mt=1<<22,be=1<<23,ze=Symbol("$state"),wr=Symbol("legacy props"),Nt=new class extends Error{constructor(){super(...arguments);ut(this,"name","StaleReactionError");ut(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function yr(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Er(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function br(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function kr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xr(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Tr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Sr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Pr(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function qr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Rr=1,Ar=2,Cr=16,Dr=1,Mr=2,M=Symbol();let Nr=!1;function on(e){return e===this.v}function Fr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function cn(e){return!Fr(e,this.v)}let ct=!1,Xl=!1;function Ir(){ct=!0}let F=null;function vt(e){F=e}function Fe(e,t=!1,n){F={p:F,c:null,e:null,s:e,x:null,l:ct&&!t?{s:null,u:null,$:[]}:null}}function Ie(e){var t=F,n=t.e;if(n!==null){t.e=null;for(var r of n)qn(r)}return F=t.p,{}}function Le(){return!ct||F!==null&&F.l===null}const Lr=new WeakMap;function Or(e){var t=E;if(t===null)return y.f|=be,e;if((t.f&At)===0){if((t.f&sn)===0)throw!t.parent&&e instanceof Error&&vn(e),e;t.b.error(e)}else Ft(e,t)}function Ft(e,t){for(;t!==null;){if((t.f&sn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&vn(e),e}function vn(e){const t=Lr.get(e);t&&(Pt(e,"message",{value:t.message}),Pt(e,"stack",{value:t.stack}))}let He=[],It=[];function dn(){var e=He;He=[],an(e)}function Ur(){var e=It;It=[],an(e)}function _n(e){He.length===0&&queueMicrotask(dn),He.push(e)}function Vr(){He.length>0&&dn(),It.length>0&&Ur()}function jr(){for(var e=E.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&yr(),e}function dt(e){var t=B|$,n=y!==null&&(y.f&B)!==0?y:null;return E===null||n!==null&&(n.f&H)!==0?t|=H:E.f|=Ct,{ctx:F,deps:null,effects:null,equals:on,f:t,fn:e,reactions:null,rv:0,v:M,wv:0,parent:n??E,ac:null}}function Kr(e,t){let n=E;n===null&&Er();var r=n.b,i=void 0,l=Xe(M),a=null,u=!y;return nl(()=>{try{var s=e()}catch(c){s=Promise.reject(c)}var f=()=>s;i=(a==null?void 0:a.then(f,f))??Promise.resolve(s),a=i;var d=x,_=r.pending;u&&(r.update_pending_count(1),_||d.increment());const o=(c,v=void 0)=>{a=null,_||d.activate(),v?v!==Nt&&(l.f|=be,mt(l,v)):((l.f&be)!==0&&(l.f^=be),mt(l,c)),u&&(r.update_pending_count(-1),_||d.decrement()),mn()};if(i.then(o,c=>o(null,c||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(s=>{function f(d){function _(){d===i?s(l):f(i)}d.then(_,_)}f(i)})}function Lt(e){const t=dt(e);return On(t),t}function hn(e){const t=dt(e);return t.equals=cn,t}function gn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)re(t[n])}}function Yr(e){for(var t=e.parent;t!==null;){if((t.f&B)===0)return t;t=t.parent}return null}function Ot(e){var t,n=E;_e(Yr(e));try{gn(e),t=Yn(e)}finally{_e(n)}return t}function pn(e){var t=Ot(e);if(e.equals(t)||(e.v=t,e.wv=jn()),!Se)if(oe!==null)oe.set(e,e.v);else{var n=(he||(e.f&H)!==0)&&e.deps!==null?fe:N;V(e,n)}}function Br(e,t,n){const r=Le()?dt:hn;if(t.length===0){n(e.map(r));return}var i=x,l=E,a=Wr(),u=jr();Promise.all(t.map(s=>Kr(s))).then(s=>{i==null||i.activate(),a();try{n([...e.map(r),...s])}catch(f){(l.f&Ee)===0&&Ft(f,l)}i==null||i.deactivate(),mn()}).catch(s=>{u.error(s)})}function Wr(){var e=E,t=y,n=F;return function(){_e(e),ie(t),vt(n)}}function mn(){_e(null),ie(null),vt(null)}const Ge=new Set;let x=null,_t=null,oe=null,wn=new Set,ht=[];function yn(){const e=ht.shift();ht.length>0&&queueMicrotask(yn),e()}let ke=[],gt=null,Ut=!1,pt=!1;const Tt=class Tt{constructor(){Y(this,ne);ut(this,"current",new Map);Y(this,je,new Map);Y(this,Ke,new Set);Y(this,pe,0);Y(this,rt,null);Y(this,lt,!1);Y(this,qe,[]);Y(this,Ye,[]);Y(this,Re,[]);Y(this,me,[]);Y(this,Be,[]);Y(this,it,[]);Y(this,at,[]);ut(this,"skipped_effects",new Set)}process(t){var l;ke=[],_t=null;var n=null;if(Ge.size>1){n=new Map,oe=new Map;for(const[a,u]of this.current)n.set(a,{v:a.v,wv:a.wv}),a.v=u;for(const a of Ge)if(a!==this)for(const[u,s]of k(a,je))n.has(u)||(n.set(u,{v:u.v,wv:u.wv}),u.v=s)}for(const a of t)De(this,ne,vr).call(this,a);if(k(this,qe).length===0&&k(this,pe)===0){De(this,ne,rn).call(this);var r=k(this,Re),i=k(this,me);J(this,Re,[]),J(this,me,[]),J(this,Be,[]),_t=x,x=null,bn(r),bn(i),x===null?x=this:Ge.delete(this),(l=k(this,rt))==null||l.resolve()}else De(this,ne,St).call(this,k(this,Re)),De(this,ne,St).call(this,k(this,me)),De(this,ne,St).call(this,k(this,Be));if(n){for(const[a,{v:u,wv:s}]of n)a.wv<=s&&(a.v=u);oe=null}for(const a of k(this,qe))$e(a);for(const a of k(this,Ye))$e(a);J(this,qe,[]),J(this,Ye,[])}capture(t,n){k(this,je).has(t)||k(this,je).set(t,n),this.current.set(t,t.v)}activate(){x=this}deactivate(){x=null,_t=null;for(const t of wn)if(wn.delete(t),t(),x!==null)break}neuter(){J(this,lt,!0)}flush(){ke.length>0?En():De(this,ne,rn).call(this),x===this&&(k(this,pe)===0&&Ge.delete(this),this.deactivate())}increment(){J(this,pe,k(this,pe)+1)}decrement(){if(J(this,pe,k(this,pe)-1),k(this,pe)===0){for(const t of k(this,it))V(t,$),xe(t);for(const t of k(this,at))V(t,fe),xe(t);J(this,Re,[]),J(this,me,[]),this.flush()}else this.deactivate()}add_callback(t){k(this,Ke).add(t)}settled(){return(k(this,rt)??J(this,rt,pr())).promise}static ensure(){if(x===null){const t=x=new Tt;Ge.add(x),pt||Tt.enqueue(()=>{x===t&&t.flush()})}return x}static enqueue(t){ht.length===0&&queueMicrotask(yn),ht.unshift(t)}};je=new WeakMap,Ke=new WeakMap,pe=new WeakMap,rt=new WeakMap,lt=new WeakMap,qe=new WeakMap,Ye=new WeakMap,Re=new WeakMap,me=new WeakMap,Be=new WeakMap,it=new WeakMap,at=new WeakMap,ne=new WeakSet,vr=function(t){var d;t.f^=N;for(var n=t.first;n!==null;){var r=n.f,i=(r&(se|ye))!==0,l=i&&(r&N)!==0,a=l||(r&ee)!==0||this.skipped_effects.has(n);if(!a&&n.fn!==null){if(i)n.f^=N;else if((r&N)===0)if((r&qt)!==0)k(this,me).push(n);else if((r&Mt)!==0){var u=(d=n.b)!=null&&d.pending?k(this,Ye):k(this,qe);u.push(n)}else Et(n)&&((n.f&We)!==0&&k(this,Be).push(n),$e(n));var s=n.first;if(s!==null){n=s;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}},St=function(t){for(const n of t)((n.f&$)!==0?k(this,it):k(this,at)).push(n),V(n,N);t.length=0},rn=function(){if(!k(this,lt))for(const t of k(this,Ke))t();k(this,Ke).clear()};let Qe=Tt;function zr(e){var t=pt;pt=!0;try{for(var n;;){if(Vr(),ke.length===0&&(x==null||x.flush(),ke.length===0))return gt=null,n;En()}}finally{pt=t}}function En(){var e=Ue;Ut=!0;try{var t=0;for(In(!0);ke.length>0;){var n=Qe.ensure();if(t++>1e3){var r,i;Hr()}n.process(ke),Te.clear()}}finally{Ut=!1,In(e),gt=null}}function Hr(){try{Tr()}catch(e){Ft(e,gt)}}function bn(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Ee|ee))===0&&Et(r)){var i=x?x.current.size:0;if($e(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Mn(r):r.fn=null),x!==null&&x.current.size>i&&(r.f&fn)!==0)break}}for(;n<t;)xe(e[n++])}}function xe(e){for(var t=gt=e;t.parent!==null;){t=t.parent;var n=t.f;if(Ut&&t===E&&(n&We)!==0)return;if((n&(ye|se))!==0){if((n&N)===0)return;t.f^=N}}ke.push(t)}const Te=new Map;function Xe(e,t){var n={f:0,v:e,reactions:null,equals:on,rv:0,wv:0};return n}function I(e,t){const n=Xe(e);return On(n),n}function Gr(e,t=!1,n=!0){var i;const r=Xe(e);return t||(r.equals=cn),ct&&n&&F!==null&&F.l!==null&&((i=F.l).s??(i.s=[])).push(r),r}function T(e,t,n=!1){y!==null&&(!le||(y.f&un)!==0)&&Le()&&(y.f&(B|We|Mt|un))!==0&&!(L!=null&&L.includes(e))&&qr();let r=n?ce(t):t;return mt(e,r)}function mt(e,t){if(!e.equals(t)){var n=e.v;Se?Te.set(e,t):Te.set(e,n),e.v=t;var r=Qe.ensure();r.capture(e,n),(e.f&B)!==0&&((e.f&$)!==0&&Ot(e),V(e,(e.f&H)===0?N:fe)),e.wv=jn(),kn(e,$),Le()&&E!==null&&(E.f&N)!==0&&(E.f&(se|ye))===0&&(Q===null?ll([e]):Q.push(e))}return t}function wt(e,t=1){var n=g(e),r=t===1?n++:n--;return T(e,n),r}function Vt(e){T(e,e.v+1)}function kn(e,t){var n=e.reactions;if(n!==null)for(var r=Le(),i=n.length,l=0;l<i;l++){var a=n[l],u=a.f;if(!(!r&&a===E)){var s=(u&$)===0;s&&V(a,t),(u&B)!==0?kn(a,fe):s&&xe(a)}}}function ce(e){if(typeof e!="object"||e===null||ze in e)return e;const t=hr(e);if(t!==dr&&t!==_r)return e;var n=new Map,r=P(e),i=I(0),l=Pe,a=u=>{if(Pe===l)return u();var s=y,f=Pe;ie(null),Vn(l);var d=u();return ie(s),Vn(f),d};return r&&n.set("length",I(e.length)),new Proxy(e,{defineProperty(u,s,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Sr();var d=n.get(s);return d===void 0?d=a(()=>{var _=I(f.value);return n.set(s,_),_}):T(d,f.value,!0),!0},deleteProperty(u,s){var f=n.get(s);if(f===void 0){if(s in u){const d=a(()=>I(M));n.set(s,d),Vt(i)}}else T(f,M),Vt(i);return!0},get(u,s,f){var c;if(s===ze)return e;var d=n.get(s),_=s in u;if(d===void 0&&(!_||(c=Ne(u,s))!=null&&c.writable)&&(d=a(()=>{var v=ce(_?u[s]:M),h=I(v);return h}),n.set(s,d)),d!==void 0){var o=g(d);return o===M?void 0:o}return Reflect.get(u,s,f)},getOwnPropertyDescriptor(u,s){var f=Reflect.getOwnPropertyDescriptor(u,s);if(f&&"value"in f){var d=n.get(s);d&&(f.value=g(d))}else if(f===void 0){var _=n.get(s),o=_==null?void 0:_.v;if(_!==void 0&&o!==M)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return f},has(u,s){var o;if(s===ze)return!0;var f=n.get(s),d=f!==void 0&&f.v!==M||Reflect.has(u,s);if(f!==void 0||E!==null&&(!d||(o=Ne(u,s))!=null&&o.writable)){f===void 0&&(f=a(()=>{var c=d?ce(u[s]):M,v=I(c);return v}),n.set(s,f));var _=g(f);if(_===M)return!1}return d},set(u,s,f,d){var p;var _=n.get(s),o=s in u;if(r&&s==="length")for(var c=f;c<_.v;c+=1){var v=n.get(c+"");v!==void 0?T(v,M):c in u&&(v=a(()=>I(M)),n.set(c+"",v))}if(_===void 0)(!o||(p=Ne(u,s))!=null&&p.writable)&&(_=a(()=>I(void 0)),T(_,ce(f)),n.set(s,_));else{o=_.v!==M;var h=a(()=>ce(f));T(_,h)}var m=Reflect.getOwnPropertyDescriptor(u,s);if(m!=null&&m.set&&m.set.call(d,f),!o){if(r&&typeof s=="string"){var w=n.get("length"),b=Number(s);Number.isInteger(b)&&b>=w.v&&T(w,b+1)}Vt(i)}return!0},ownKeys(u){g(i);var s=Reflect.ownKeys(u).filter(_=>{var o=n.get(_);return o===void 0||o.v!==M});for(var[f,d]of n)d.v!==M&&!(f in u)&&s.push(f);return s},setPrototypeOf(){Pr()}})}var jt,xn,Tn,Sn;function Qr(){if(jt===void 0){jt=window,xn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Tn=Ne(t,"firstChild").get,Sn=Ne(t,"nextSibling").get,ln(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ln(n)&&(n.__t=void 0)}}function Ze(e=""){return document.createTextNode(e)}function ve(e){return Tn.call(e)}function yt(e){return Sn.call(e)}function G(e,t){return ve(e)}function te(e,t){{var n=ve(e);return n instanceof Comment&&n.data===""?yt(n):n}}function de(e,t=1,n=!1){let r=e;for(;t--;)r=yt(r);return r}function Xr(e){e.textContent=""}function Pn(){return!1}function Zr(e){E===null&&y===null&&xr(),y!==null&&(y.f&H)!==0&&E===null&&kr(),Se&&br()}function Jr(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ue(e,t,n,r=!0){var i=E;i!==null&&(i.f&ee)!==0&&(e|=ee);var l={ctx:F,deps:null,nodes_start:null,nodes_end:null,f:e|$,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{$e(l),l.f|=At}catch(s){throw re(l),s}else t!==null&&xe(l);var a=n&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&Ct)===0;if(!a&&r&&(i!==null&&Jr(l,i),y!==null&&(y.f&B)!==0&&(e&ye)===0)){var u=y;(u.effects??(u.effects=[])).push(l)}return l}function $r(e){const t=ue(Rt,null,!1);return V(t,N),t.teardown=e,t}function Kt(e){Zr();var t=E.f,n=!y&&(t&se)!==0&&(t&At)===0;if(n){var r=F;(r.e??(r.e=[])).push(e)}else return qn(e)}function qn(e){return ue(qt|fn,e,!1)}function el(e){Qe.ensure();const t=ue(ye,e,!0);return(n={})=>new Promise(r=>{n.outro?Wt(t,()=>{re(t),r(void 0)}):(re(t),r(void 0))})}function tl(e){return ue(qt,e,!1)}function nl(e){return ue(Mt|Ct,e,!0)}function Rn(e,t=0){return ue(Rt|t,e,!0)}function Yt(e,t=[],n=[]){Br(t,n,r=>{ue(Rt,()=>e(...r.map(g)),!0)})}function Bt(e,t=0){var n=ue(We|t,e,!0);return n}function Oe(e,t=!0){return ue(se,e,!0,t)}function An(e){var t=e.teardown;if(t!==null){const n=Se,r=y;Ln(!0),ie(null);try{t.call(null)}finally{Ln(n),ie(r)}}}function Cn(e,t=!1){var i;var n=e.first;for(e.first=e.last=null;n!==null;){(i=n.ac)==null||i.abort(Nt);var r=n.next;(n.f&ye)!==0?n.parent=null:re(n,t),n=r}}function rl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&se)===0&&re(t),t=n}}function re(e,t=!0){var n=!1;(t||(e.f&mr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Dn(e.nodes_start,e.nodes_end),n=!0),Cn(e,t&&!n),bt(e,0),V(e,Ee);var r=e.transitions;if(r!==null)for(const l of r)l.stop();An(e);var i=e.parent;i!==null&&i.first!==null&&Mn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Dn(e,t){for(;e!==null;){var n=e===t?null:yt(e);e.remove(),e=n}}function Mn(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Wt(e,t){var n=[];zt(e,n,!0),Nn(n,()=>{re(e),t&&t()})}function Nn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function zt(e,t,n){if((e.f&ee)===0){if(e.f^=ee,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var i=r.next,l=(r.f&ot)!==0||(r.f&se)!==0;zt(r,t,l?n:!1),r=i}}}function Ht(e){Fn(e,!0)}function Fn(e,t){if((e.f&ee)!==0){e.f^=ee,(e.f&N)===0&&(V(e,$),xe(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&ot)!==0||(n.f&se)!==0;Fn(n,i?t:!1),n=r}if(e.transitions!==null)for(const l of e.transitions)(l.is_global||t)&&l.in()}}let Ue=!1;function In(e){Ue=e}let Se=!1;function Ln(e){Se=e}let y=null,le=!1;function ie(e){y=e}let E=null;function _e(e){E=e}let L=null;function On(e){y!==null&&(L===null?L=[e]:L.push(e))}let O=null,W=0,Q=null;function ll(e){Q=e}let Un=1,Je=0,Pe=Je;function Vn(e){Pe=e}let he=!1;function jn(){return++Un}function Et(e){var _;var t=e.f;if((t&$)!==0)return!0;if((t&fe)!==0){var n=e.deps,r=(t&H)!==0;if(n!==null){var i,l,a=(t&ft)!==0,u=r&&E!==null&&!he,s=n.length;if((a||u)&&(E===null||(E.f&Ee)===0)){var f=e,d=f.parent;for(i=0;i<s;i++)l=n[i],(a||!((_=l==null?void 0:l.reactions)!=null&&_.includes(f)))&&(l.reactions??(l.reactions=[])).push(f);a&&(f.f^=ft),u&&d!==null&&(d.f&H)===0&&(f.f^=H)}for(i=0;i<s;i++)if(l=n[i],Et(l)&&pn(l),l.wv>e.wv)return!0}(!r||E!==null&&!he)&&V(e,N)}return!1}function Kn(e,t,n=!0){var r=e.reactions;if(r!==null&&!(L!=null&&L.includes(e)))for(var i=0;i<r.length;i++){var l=r[i];(l.f&B)!==0?Kn(l,t,!1):t===l&&(n?V(l,$):(l.f&N)!==0&&V(l,fe),xe(l))}}function Yn(e){var v;var t=O,n=W,r=Q,i=y,l=he,a=L,u=F,s=le,f=Pe,d=e.f;O=null,W=0,Q=null,he=(d&H)!==0&&(le||!Ue||y===null),y=(d&(se|ye))===0?e:null,L=null,vt(e.ctx),le=!1,Pe=++Je,e.ac!==null&&(e.ac.abort(Nt),e.ac=null);try{e.f|=Dt;var _=(0,e.fn)(),o=e.deps;if(O!==null){var c;if(bt(e,W),o!==null&&W>0)for(o.length=W+O.length,c=0;c<O.length;c++)o[W+c]=O[c];else e.deps=o=O;if(!he||(d&B)!==0&&e.reactions!==null)for(c=W;c<o.length;c++)((v=o[c]).reactions??(v.reactions=[])).push(e)}else o!==null&&W<o.length&&(bt(e,W),o.length=W);if(Le()&&Q!==null&&!le&&o!==null&&(e.f&(B|fe|$))===0)for(c=0;c<Q.length;c++)Kn(Q[c],e);return i!==null&&i!==e&&(Je++,Q!==null&&(r===null?r=Q:r.push(...Q))),(e.f&be)!==0&&(e.f^=be),_}catch(h){return Or(h)}finally{e.f^=Dt,O=t,W=n,Q=r,y=i,he=l,L=a,vt(u),le=s,Pe=f}}function il(e,t){let n=t.reactions;if(n!==null){var r=D.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&B)!==0&&(O===null||!O.includes(t))&&(V(t,fe),(t.f&(H|ft))===0&&(t.f^=ft),gn(t),bt(t,0))}function bt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)il(e,n[r])}function $e(e){var t=e.f;if((t&Ee)===0){V(e,N);var n=E,r=Ue;E=e,Ue=!0;try{(t&We)!==0?rl(e):Cn(e),An(e);var i=Yn(e);e.teardown=typeof i=="function"?i:null,e.wv=Un;var l}finally{Ue=r,E=n}}}async function Bn(){await Promise.resolve(),zr()}function g(e){var t=e.f,n=(t&B)!==0;if(y!==null&&!le){var r=E!==null&&(E.f&Ee)!==0;if(!r&&!(L!=null&&L.includes(e))){var i=y.deps;if((y.f&Dt)!==0)e.rv<Je&&(e.rv=Je,O===null&&i!==null&&i[W]===e?W++:O===null?O=[e]:(!he||!O.includes(e))&&O.push(e));else{(y.deps??(y.deps=[])).push(e);var l=e.reactions;l===null?e.reactions=[y]:l.includes(y)||l.push(y)}}}else if(n&&e.deps===null&&e.effects===null){var a=e,u=a.parent;u!==null&&(u.f&H)===0&&(a.f^=H)}if(Se){if(Te.has(e))return Te.get(e);if(n){a=e;var s=a.v;return((a.f&N)===0&&a.reactions!==null||Wn(a))&&(s=Ot(a)),Te.set(a,s),s}}else if(n){if(a=e,oe!=null&&oe.has(a))return oe.get(a);Et(a)&&pn(a)}if((e.f&be)!==0)throw e.v;return e.v}function Wn(e){if(e.v===M)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Te.has(t)||(t.f&B)!==0&&Wn(t))return!0;return!1}function zn(e){var t=le;try{return le=!0,e()}finally{le=t}}const al=-7169;function V(e,t){e.f=e.f&al|t}const sl=["touchstart","touchmove"];function ul(e){return sl.includes(e)}let Hn=!1;function fl(){Hn||(Hn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Gn(e){var t=y,n=E;ie(null),_e(null);try{return e()}finally{ie(t),_e(n)}}function ol(e,t,n,r=n){e.addEventListener(t,()=>Gn(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),fl()}const Qn=new Set,Gt=new Set;function cl(e,t,n,r={}){function i(l){if(r.capture||et.call(t,l),!l.cancelBubble)return Gn(()=>n==null?void 0:n.call(this,l))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?_n(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Xn(e,t,n,r,i){var l={capture:r,passive:i},a=cl(e,t,n,l);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&$r(()=>{t.removeEventListener(e,a,l)})}function Qt(e){for(var t=0;t<e.length;t++)Qn.add(e[t]);for(var n of Gt)n(e)}function et(e){var b;var t=this,n=t.ownerDocument,r=e.type,i=((b=e.composedPath)==null?void 0:b.call(e))||[],l=i[0]||e.target,a=0,u=e.__root;if(u){var s=i.indexOf(u);if(s!==-1&&(t===document||t===window)){e.__root=t;return}var f=i.indexOf(t);if(f===-1)return;s<=f&&(a=s)}if(l=i[a]||e.target,l!==t){Pt(e,"currentTarget",{configurable:!0,get(){return l||n}});var d=y,_=E;ie(null),_e(null);try{for(var o,c=[];l!==null;){var v=l.assignedSlot||l.parentNode||l.host||null;try{var h=l["__"+r];if(h!=null&&(!l.disabled||e.target===l))if(P(h)){var[m,...w]=h;m.apply(l,[e,...w])}else h.call(l,e)}catch(p){o?c.push(p):o=p}if(e.cancelBubble||v===t||v===null)break;l=v}if(o){for(let p of c)queueMicrotask(()=>{throw p});throw o}}finally{e.__root=t,delete e.currentTarget,ie(d),_e(_)}}}function Zn(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function tt(e,t){var n=E;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function j(e,t){var n=(t&Dr)!==0,r=(t&Mr)!==0,i,l=!e.startsWith("<!>");return()=>{i===void 0&&(i=Zn(l?e:"<!>"+e),n||(i=ve(i)));var a=r||xn?document.importNode(i,!0):i.cloneNode(!0);if(n){var u=ve(a),s=a.lastChild;tt(u,s)}else tt(a,a);return a}}function Jn(e=""){{var t=Ze(e+"");return tt(t,t),t}}function ge(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ze();return e.append(t,n),tt(t,n),e}function R(e,t){e!==null&&e.before(t)}function vl(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function dl(e,t){return _l(e,t)}const Ve=new Map;function _l(e,{target:t,anchor:n,props:r={},events:i,context:l,intro:a=!0}){Qr();var u=new Set,s=_=>{for(var o=0;o<_.length;o++){var c=_[o];if(!u.has(c)){u.add(c);var v=ul(c);t.addEventListener(c,et,{passive:v});var h=Ve.get(c);h===void 0?(document.addEventListener(c,et,{passive:v}),Ve.set(c,1)):Ve.set(c,h+1)}}};s(Me(Qn)),Gt.add(s);var f=void 0,d=el(()=>{var _=n??t.appendChild(Ze());return Oe(()=>{if(l){Fe({});var o=F;o.c=l}i&&(r.$$events=i),f=e(_,r)||{},l&&Ie()}),()=>{var v;for(var o of u){t.removeEventListener(o,et);var c=Ve.get(o);--c===0?(document.removeEventListener(o,et),Ve.delete(o)):Ve.set(o,c)}Gt.delete(s),_!==n&&((v=_.parentNode)==null||v.removeChild(_))}});return hl.set(f,d),f}let hl=new WeakMap;function z(e,t,n=!1){var r=e,i=null,l=null,a=M,u=n?ot:0,s=!1;const f=(c,v=!0)=>{s=!0,o(v,c)};var d=null;function _(){d!==null&&(d.lastChild.remove(),r.before(d),d=null);var c=a?i:l,v=a?l:i;c&&Ht(c),v&&Wt(v,()=>{a?l=null:i=null})}const o=(c,v)=>{if(a!==(a=c)){var h=Pn(),m=r;if(h&&(d=document.createDocumentFragment(),d.append(m=Ze())),a?i??(i=v&&Oe(()=>v(m))):l??(l=v&&Oe(()=>v(m))),h){var w=x,b=a?i:l,p=a?l:i;b&&w.skipped_effects.delete(b),p&&w.skipped_effects.add(p),w.add_callback(_)}else _()}};Bt(()=>{s=!1,t(f),s||o(null,null)},u)}function $n(e,t){return t}function gl(e,t,n){for(var r=e.items,i=[],l=t.length,a=0;a<l;a++)zt(t[a].e,i,!0);var u=l>0&&i.length===0&&n!==null;if(u){var s=n.parentNode;Xr(s),s.append(n),r.clear(),ae(e,t[0].prev,t[l-1].next)}Nn(i,()=>{for(var f=0;f<l;f++){var d=t[f];u||(r.delete(d.k),ae(e,d.prev,d.next)),re(d.e,!u)}})}function er(e,t,n,r,i,l=null){var a=e,u={flags:t,items:new Map,first:null},s=null,f=!1,d=new Map,_=hn(()=>{var h=n();return P(h)?h:h==null?[]:Me(h)}),o,c;function v(){pl(c,o,u,d,a,i,t,r,n),l!==null&&(o.length===0?s?Ht(s):s=Oe(()=>l(a)):s!==null&&Wt(s,()=>{s=null}))}Bt(()=>{c??(c=E),o=g(_);var h=o.length;if(!(f&&h===0)){f=h===0;var m,w,b,p;if(Pn()){var S=new Set,C=x;for(w=0;w<h;w+=1){b=o[w],p=r(b,w);var U=u.items.get(p)??d.get(p);U?tr(U,b,w):(m=nr(null,u,null,null,b,p,w,i,t,n,!0),d.set(p,m)),S.add(p)}for(const[X,K]of u.items)S.has(X)||C.skipped_effects.add(K.e);C.add_callback(v)}else v();g(_)}})}function pl(e,t,n,r,i,l,a,u,s){var f=t.length,d=n.items,_=n.first,o=_,c,v=null,h=[],m=[],w,b,p,S;for(S=0;S<f;S+=1){if(w=t[S],b=u(w,S),p=d.get(b),p===void 0){var C=r.get(b);if(C!==void 0){r.delete(b),d.set(b,C);var U=v?v.next:o;ae(n,v,C),ae(n,C,U),Xt(C,U,i),v=C}else{var X=o?o.e.nodes_start:i;v=nr(X,n,v,v===null?n.first:v.next,w,b,S,l,a,s)}d.set(b,v),h=[],m=[],o=v.next;continue}if(tr(p,w,S),(p.e.f&ee)!==0&&Ht(p.e),p!==o){if(c!==void 0&&c.has(p)){if(h.length<m.length){var K=m[0],A;v=K.prev;var Z=h[0],we=h[h.length-1];for(A=0;A<h.length;A+=1)Xt(h[A],K,i);for(A=0;A<m.length;A+=1)c.delete(m[A]);ae(n,Z.prev,we.next),ae(n,v,Z),ae(n,we,K),o=K,v=we,S-=1,h=[],m=[]}else c.delete(p),Xt(p,o,i),ae(n,p.prev,p.next),ae(n,p,v===null?n.first:v.next),ae(n,v,p),v=p;continue}for(h=[],m=[];o!==null&&o.k!==b;)(o.e.f&ee)===0&&(c??(c=new Set)).add(o),m.push(o),o=o.next;if(o===null)continue;p=o}h.push(p),v=p,o=p.next}if(o!==null||c!==void 0){for(var Ae=c===void 0?[]:Me(c);o!==null;)(o.e.f&ee)===0&&Ae.push(o),o=o.next;var Ce=Ae.length;if(Ce>0){var st=null;gl(n,Ae,st)}}e.first=n.first&&n.first.e,e.last=v&&v.e;for(var Hl of r.values())re(Hl.e);r.clear()}function tr(e,t,n,r){mt(e.v,t),e.i=n}function nr(e,t,n,r,i,l,a,u,s,f,d){var _=(s&Rr)!==0,o=(s&Cr)===0,c=_?o?Gr(i,!1,!1):Xe(i):i,v=(s&Ar)===0?a:Xe(a),h={i:v,v:c,k:l,a:null,e:null,prev:n,next:r};try{if(e===null){var m=document.createDocumentFragment();m.append(e=Ze())}return h.e=Oe(()=>u(e,c,v,f),Nr),h.e.prev=n&&n.e,h.e.next=r&&r.e,n===null?d||(t.first=h):(n.next=h,n.e.next=h.e),r!==null&&(r.prev=h,r.e.prev=h.e),h}finally{}}function Xt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,l=e.e.nodes_start;l!==null&&l!==r;){var a=yt(l);i.before(l),l=a}}function ae(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Zt(e,t,n=!1,r=!1,i=!1){var l=e,a="";Yt(()=>{var u=E;if(a!==(a=t()??"")&&(u.nodes_start!==null&&(Dn(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),a!=="")){var s=a+"";n?s=`<svg>${s}</svg>`:r&&(s=`<math>${s}</math>`);var f=Zn(s);if((n||r)&&(f=ve(f)),tt(ve(f),f.lastChild),n||r)for(;ve(f);)l.before(ve(f));else l.before(f)}})}function nt(e,t,...n){var r=e,i=gr,l;Bt(()=>{i!==(i=t())&&(l&&(re(l),l=null),l=Oe(()=>i(r,...n)))},ot)}const rr=[...` 	\n\\r\\f\xA0\\v\\uFEFF`];function ml(e,t,n){var r=""+e;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var l=i.length,a=0;(a=r.indexOf(i,a))>=0;){var u=a+l;(a===0||rr.includes(r[a-1]))&&(u===r.length||rr.includes(r[u]))?r=(a===0?"":r.substring(0,a))+r.substring(u+1):a=u}}return r===""?null:r}function wl(e,t,n,r,i,l){var a=e.__className;if(a!==n||a===void 0){var u=ml(n,r,l);u==null?e.removeAttribute("class"):e.className=u,e.__className=n}else if(l&&i!==l)for(var s in l){var f=!!l[s];(i==null||f!==!!i[s])&&e.classList.toggle(s,f)}return l}function yl(e,t,n=t){var r=Le(),i=new WeakSet;ol(e,"input",l=>{var a=l?e.defaultValue:e.value;if(a=Jt(e)?$t(a):a,n(a),x!==null&&i.add(x),r&&a!==(a=t())){var u=e.selectionStart,s=e.selectionEnd;e.value=a??"",s!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(s,e.value.length))}}),zn(t)==null&&e.value&&(n(Jt(e)?$t(e.value):e.value),x!==null&&i.add(x)),Rn(()=>{var l=t();if(e===document.activeElement){var a=_t??x;if(i.has(a))return}Jt(e)&&l===$t(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function Jt(e){var t=e.type;return t==="number"||t==="range"}function $t(e){return e===""?null:+e}function lr(e,t){return e===t||(e==null?void 0:e[ze])===t}function El(e={},t,n,r){return tl(()=>{var i,l;return Rn(()=>{i=l,l=[],zn(()=>{e!==n(...l)&&(t(e,...l),i&&lr(n(...i),e)&&t(null,...i))})}),()=>{_n(()=>{l&&lr(n(...l),e)&&t(null,...l)})}}),e}let kt=!1;function bl(e){var t=kt;try{return kt=!1,[e(),kt]}finally{kt=t}}function en(e,t,n,r){var m;var i=r,l=!0,a=()=>(l&&(l=!1,i=r),i),u;{var s=ze in e||wr in e;u=((m=Ne(e,t))==null?void 0:m.set)??(s&&t in e?w=>e[t]=w:void 0)}var f,d=!1;[f,d]=bl(()=>e[t]);var _;if(_=()=>{var w=e[t];return w===void 0?a():(l=!0,w)},u){var o=e.$$legacy;return function(w,b){return arguments.length>0?((!b||o||d)&&u(b?_():w),w):_()}}var c=!1,v=dt(()=>(c=!1,_()));g(v);var h=E;return function(w,b){if(arguments.length>0){const p=b?g(v):ce(w);return T(v,p),c=!0,i!==void 0&&(i=p),w}return Se&&c||(h.f&Ee)!==0?v.v:g(v)}}const kl="5";typeof window<"u"&&((or=window.__svelte??(window.__svelte={})).v??(or.v=new Set)).add(kl);function ir(e,t){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}}var xl=e=>e.stopPropagation(),Tl=j(\'<dialog class="sb-modal-box svelte-umhpev"><div class="sb-header"><label for="mini-editor">Search</label> <div class="sb-mini-editor"><input id="mini-editor" placeholder="Search with Silversearch" class="svelte-umhpev"/></div></div> <div class="sb-help-text"><!></div> <div class="sb-result-list" style="max-height: 80vh;"><!></div></dialog>\');function ar(e,t){Fe(t,!0);let n=en(t,"query"),r;Kt(()=>{r.showModal()});function i(){syscall("editor.hidePanel","modal")}var l=Tl();Xn("click",jt,i);var a=G(l);a.__click=[xl],a.__keydown=function(...c){var v;(v=t.onkeydown)==null||v.apply(this,c)};var u=de(G(a),2),s=G(u),f=de(a,2),d=G(f);nt(d,()=>t.helpText);var _=de(f,2),o=G(_);nt(o,()=>t.resultList),El(l,c=>r=c,()=>r),Xn("cancel",l,c=>{c.preventDefault(),syscall("editor.hidePanel","modal")}),yl(s,n),R(e,l),Ie()}Qt(["click","keydown"]),Ir();var Sl=j(`<div class="silversearch-help svelte-1n3mku8"><p class="svelte-1n3mku8">Some Advanced Tips:</p> <ul class="svelte-1n3mku8"><li>Use <code>path:&quot;&lt;somepath&gt;&quot;</code> to restrict your results\n            to corresponding paths</li> <li>Use <code>ext:&quot;png jpg&quot;</code> or <code>ext:png</code>, or\n            a plain <code>.png</code> to specify the filetype(s)</li> <li>Use <code>&quot;exact expressions&quot;</code> in quotes to further filter\n            the results returned by the query</li> <li>Use <code>-exclusions</code> to exclude notes containing certain words</li></ul></div>`);function sr(e){var t=Sl();R(e,t)}function Pl(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&")}const ur=/(<br>|&lt;|&gt;|&quot;|&#039;)/g;function tn(e,t){const n="silversearch-highlight";if(!t.length)return e;try{return e.split(ur).map(r=>r.match(ur)?r:r.replace(new RegExp(`(${t.map(i=>Pl(i.match)).join("|")})`,"giu"),`<span class="${n}">$1</span>`)).join("")}catch(r){return console.error("[Silversearch] Error in highlightText()",r),e}}var ql=j(\'<span class="silversearch-title svelte-nz7epw"><!></span>\'),Rl=j(\'<span class="silversearch-info svelte-nz7epw"><!></span>\'),Al=j(\'<div class="sb-name svelte-nz7epw"><!> <!></div>\'),Cl=j(\'<div><!> <div class="sb-description svelte-nz7epw"><!></div></div>\');function fr(e,t){var n=Cl();let r;n.__click=function(...s){var f;(f=t.onclick)==null||f.apply(this,s)},n.__mousemove=function(...s){var f;(f=t.onmousemove)==null||f.apply(this,s)};var i=G(n);{var l=s=>{var f=Al(),d=G(f);{var _=v=>{var h=ql(),m=G(h);nt(m,()=>t.title),R(v,h)};z(d,v=>{t.title&&v(_)})}var o=de(d,2);{var c=v=>{var h=Rl(),m=G(h);nt(m,()=>t.info),R(v,h)};z(o,v=>{t.info&&v(c)})}R(s,f)};z(i,s=>{(t.title||t.info)&&s(l)})}var a=de(i,2),u=G(a);nt(u,()=>t.description),Yt(s=>r=wl(n,1,"sb-option",null,r,s),[()=>({"silversearch-selected":t.selected})]),R(e,n)}Qt(["click","mousemove"]);function Dl(e,t){Fe(t,!0),fr(e,{get onclick(){return t.onclick},get onmousemove(){return t.onmousemove},get selected(){return t.selected},description:r=>{var i=ge(),l=te(i);Zt(l,()=>tn(t.excerpt.excerpt,t.matches)),R(r,i)}}),Ie()}var Ml=j("Silversearch found <code>0</code> results for your query",1),Nl=j(\'<div class="silversearch-apology svelte-10gbmf8"><!></div>\');function xt(e,t){var n=Nl(),r=G(n);{var i=a=>{var u=Ml();R(a,u)},l=a=>{var u=ge(),s=te(u);{var f=d=>{var _=Jn("Searching...");R(d,_)};z(s,d=>{t.type==="searching"&&d(f)},!0)}R(a,u)};z(r,a=>{t.type==="no-results"?a(i):a(l,!1)})}R(e,n)}var Fl=j("Press <code>Ctrl-Enter</code> to open in new Tab. Use <code>Tab</code> to switch scope.",1),Il=j("<!> <!>",1);function Ll(e,t){Fe(t,!0);let n=en(t,"query"),r=I(null),i=I(!1),l=I(0);Kt(()=>{n()?a():(T(r,null),T(i,!1))});const a=ir(s,0);let u=null;async function s(){T(i,!0),u&&(u.reject("canceled"),u=null),u=Promise.withResolvers();try{T(r,(await Promise.race([syscall("silversearch.search",n(),t.currentPage),u.promise]))[0],!0),u=null,T(l,0),_(),T(i,!1)}catch{}}async function f(o){if(!g(r))return;const c=g(r).excerpts[g(l)].offset;await syscall("editor.navigate",{kind:"page",page:g(r).ref,pos:c},!1,o),await syscall("editor.hidePanel","modal")}function d(o){var c;if(o.key==="ArrowUp")wt(l,-1);else if(o.key==="ArrowDown")wt(l);else if(o.key==="Enter")f(o.ctrlKey);else return;o.preventDefault(),T(l,Math.max(0,Math.min((((c=g(r))==null?void 0:c.excerpts.length)??0)-1,g(l))),!0),_()}async function _(){await Bn();const o=document.querySelector(".silversearch-selected");o&&o.scrollIntoView({block:"nearest"})}ar(e,{onkeydown:d,get query(){return n()},set query(v){n(v)},helpText:v=>{var h=Fl();R(v,h)},resultList:v=>{var h=Il(),m=te(h);er(m,17,()=>{var S;return((S=g(r))==null?void 0:S.excerpts)??[]},$n,(S,C,U)=>{const X=Lt(()=>U===g(l));{let K=Lt(()=>{var A;return((A=g(r))==null?void 0:A.matches)??[]});Dl(S,{get excerpt(){return g(C)},get matches(){return g(K)},get selected(){return g(X)},onclick:({ctrlKey:A})=>f(A),onmousemove:()=>T(l,U,!0)})}});var w=de(m,2);{var b=S=>{xt(S,{type:"no-results"})},p=S=>{var C=ge(),U=te(C);{var X=A=>{sr(A)},K=A=>{var Z=ge(),we=te(Z);{var Ae=Ce=>{xt(Ce,{type:"searching"})};z(we,Ce=>{!g(r)&&g(i)&&Ce(Ae)},!0)}R(A,Z)};z(U,A=>{!g(r)&&!g(i)?A(X):A(K,!1)},!0)}R(S,C)};z(w,S=>{!g(r)&&!g(i)&&n()?S(b):S(p,!1)})}R(v,h)},$$slots:{helpText:!0,resultList:!0}}),Ie()}function Ol(e,t){Fe(t,!0),fr(e,{get onmousemove(){return t.onmousemove},get onclick(){return t.onclick},get selected(){return t.selected},title:l=>{var a=ge(),u=te(a);Zt(u,()=>tn(t.result.ref,t.result.matchesName)),R(l,a)},info:l=>{var a=Jn();Yt(()=>vl(a,`${t.result.matches.length??""} Matches`)),R(l,a)},description:l=>{var a=ge(),u=te(a);Zt(u,()=>tn(t.result.excerpts[0].excerpt,t.result.matches)),R(l,a)}}),Ie()}var Ul=j("Use <code>Tab</code> to switch scope.",1),Vl=j("Press <code>Ctrl-Enter</code> to open in new Tab and <code>Alt-Enter</code> to insert a link. <!>",1),jl=j("<!> <!>",1);function Kl(e,t){Fe(t,!0);let n=en(t,"query"),r=I(ce([])),i=I(!1),l=I(0);Kt(()=>{n()?a():(T(r,[],!0),T(i,!1))});const a=ir(s,0);let u=null;async function s(){T(i,!0),u&&(u.reject("canceled"),u=null),u=Promise.withResolvers();try{T(r,await Promise.race([syscall("silversearch.search",n()),u.promise]),!0),u=null,T(l,0),o(),T(i,!1)}catch{}}async function f(c){var m,w;const v=g(r)[g(l)],h=((w=(m=v.matches)==null?void 0:m[0])==null?void 0:w.offset)??0;await syscall("editor.navigate",{kind:"page",page:v.ref,pos:h},!1,c),await syscall("editor.hidePanel","modal")}async function d(){const v=`[[${g(r)[g(l)].ref}]]`;await syscall("editor.insertAtCursor",v),await syscall("editor.hidePanel","modal")}function _(c){if(c.key==="ArrowUp")wt(l,-1);else if(c.key==="ArrowDown")wt(l);else if(c.key==="Enter")c.altKey?d():f(c.ctrlKey);else return;c.preventDefault(),T(l,Math.max(0,Math.min(g(r).length-1,g(l))),!0),o()}async function o(){await Bn();const c=document.querySelector(".silversearch-selected");c&&c.scrollIntoView({block:"nearest"})}ar(e,{onkeydown:_,get query(){return n()},set query(h){n(h)},helpText:h=>{var m=Vl(),w=de(te(m),5);{var b=p=>{var S=Ul();R(p,S)};z(w,p=>{t.isDocumentEditor||p(b)})}R(h,m)},resultList:h=>{var m=jl(),w=te(m);er(w,17,()=>g(r),$n,(C,U,X)=>{const K=Lt(()=>X===g(l));Ol(C,{get result(){return g(U)},get selected(){return g(K)},onclick:({ctrlKey:A})=>f(A),onmousemove:()=>T(l,X,!0)})});var b=de(w,2);{var p=C=>{xt(C,{type:"no-results"})},S=C=>{var U=ge(),X=te(U);{var K=Z=>{sr(Z)},A=Z=>{var we=ge(),Ae=te(we);{var Ce=st=>{xt(st,{type:"searching"})};z(Ae,st=>{!g(r).length&&g(i)&&st(Ce)},!0)}R(Z,we)};z(X,Z=>{!g(r).length&&!g(i)?Z(K):Z(A,!1)},!0)}R(C,U)};z(b,C=>{!g(r).length&&!g(i)&&n()?C(p):C(S,!1)})}R(h,m)},$$slots:{helpText:!0,resultList:!0}}),Ie()}function Yl(e,t,n){e.stopPropagation(),e.key==="Tab"&&(t.isDocumentEditor||(T(n,!g(n)),e.preventDefault()))}var Bl=j("<div><!></div>");function Wl(e,t){let n=I(ce(t.defaultQuery)),r=I(!0);var i=Bl();i.__keydown=[Yl,t,r];var l=G(i);{var a=s=>{Kl(s,{get isDocumentEditor(){return t.isDocumentEditor},get query(){return g(n)},set query(f){T(n,f,!0)}})},u=s=>{Ll(s,{get currentPage(){return t.currentPage},get query(){return g(n)},set query(f){T(n,f,!0)}})};z(l,s=>{g(r)?s(a):s(u,!1)})}R(e,i)}Qt(["keydown"]);async function zl(){const e=syscall("editor.getCurrentPage"),t=syscall("editor.getCurrentEditor");await Promise.race([new Promise(n=>setTimeout(n,75)),new Promise(n=>{const r=document.querySelector("link#stylesheet");r&&(r.onload=n)})]),dl(Wl,{target:document.querySelector("#container"),props:{defaultQuery:globalThis.DEFAULT_QUERY??"",currentPage:await e,isDocumentEditor:await t!=="page"}})}zl()})();\n';var he=`<style>html,body{background:none!important}*{font-family:var(--ui-font)}code{font-family:monospace}.silversearch-highlight{background-color:color-mix(in srgb,var(--editor-highlight-background-color),50% transparent)}dialog.svelte-umhpev{outline:none}#mini-editor.svelte-umhpev{caret-color:var(--editor-caret-color);outline:none;border:none;padding:2px 0 0 3px;line-height:1.4;width:100%;background:none;font-family:var(--ui-font);font-size:1em;color:inherit}.silversearch-help.svelte-1n3mku8{padding:8px;line-height:1.5;color:var(--modal-help-color)}.silversearch-help.svelte-1n3mku8 p:where(.svelte-1n3mku8){margin:0}.silversearch-help.svelte-1n3mku8 ul:where(.svelte-1n3mku8){margin:0;list-style-position:inside;padding-left:15px}.sb-description.svelte-nz7epw{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;overflow:hidden}.sb-name.svelte-nz7epw{display:flex;white-space:nowrap;align-items:baseline}.silversearch-info.svelte-nz7epw{font-size:.8rem;margin-left:1ch;color:var(--modal-description-color)}.silversearch-title.svelte-nz7epw{text-overflow:ellipsis;overflow:hidden}.silversearch-selected{background-color:var(--editor-selection-background-color)}.silversearch-apology.svelte-10gbmf8{text-align:center;padding:5px}</style>
<link id="stylesheet" rel="stylesheet" href="/.client/main.css"/>
<div id="container"></div>`;var zs="ENTRIES",Ze="KEYS",Ye="VALUES",S="",J=class{constructor(e,t){let s=e._tree,r=Array.from(s.keys());this.set=e,this._type=t,this._path=r.length>0?[{node:s,keys:r}]:[]}next(){let e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};let{node:e,keys:t}=K(this._path);if(K(t)===S)return{done:!1,value:this.result()};let s=e.get(K(t));return this._path.push({node:s,keys:Array.from(s.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;let e=K(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>K(e)).filter(e=>e!==S).join("")}value(){return K(this._path).node.get(S)}result(){switch(this._type){case Ye:return this.value();case Ze:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}},K=n=>n[n.length-1],Us=(n,e,t)=>{let s=new Map;if(e===void 0)return s;let r=e.length+1,o=r+t,u=new Uint8Array(o*r).fill(t+1);for(let a=0;a<r;++a)u[a]=a;for(let a=1;a<o;++a)u[a*r]=a;return en(n,e,t,s,u,1,r,""),s},en=(n,e,t,s,r,o,u,a)=>{let I=o*u;e:for(let p of n.keys())if(p===S){let l=r[I-1];l<=t&&s.set(a,[n.get(p),l])}else{let l=o;for(let d=0;d<p.length;++d,++l){let m=p[d],T=u*l,h=T-u,y=r[T],x=Math.max(0,l-t-1),g=Math.min(u-1,l+t);for(let k=x;k<g;++k){let R=m!==e[k],j=r[h+k]+ +R,Z=r[h+k+1]+1,_=r[T+k]+1,M=r[T+k+1]=Math.min(j,Z,_);M<y&&(y=M)}if(y>t)continue e}en(n.get(p),e,t,s,r,l,u,a+p)}},X=class n{constructor(e=new Map,t=""){this._size=void 0,this._tree=e,this._prefix=t}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");let[t,s]=se(this._tree,e.slice(this._prefix.length));if(t===void 0){let[r,o]=Be(s);for(let u of r.keys())if(u!==S&&u.startsWith(o)){let a=new Map;return a.set(u.slice(o.length),r.get(u)),new n(a,e)}}return new n(t,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,Gs(this._tree,e)}entries(){return new J(this,zs)}forEach(e){for(let[t,s]of this)e(t,s,this)}fuzzyGet(e,t){return Us(this._tree,e,t)}get(e){let t=Oe(this._tree,e);return t!==void 0?t.get(S):void 0}has(e){let t=Oe(this._tree,e);return t!==void 0&&t.has(S)}keys(){return new J(this,Ze)}set(e,t){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,xe(this._tree,e).set(S,t),this}get size(){if(this._size)return this._size;this._size=0;let e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;let s=xe(this._tree,e);return s.set(S,t(s.get(S))),this}fetch(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;let s=xe(this._tree,e),r=s.get(S);return r===void 0&&s.set(S,r=t()),r}values(){return new J(this,Ye)}[Symbol.iterator](){return this.entries()}static from(e){let t=new n;for(let[s,r]of e)t.set(s,r);return t}static fromObject(e){return n.from(Object.entries(e))}},se=(n,e,t=[])=>{if(e.length===0||n==null)return[n,t];for(let s of n.keys())if(s!==S&&e.startsWith(s))return t.push([n,s]),se(n.get(s),e.slice(s.length),t);return t.push([n,e]),se(void 0,"",t)},Oe=(n,e)=>{if(e.length===0||n==null)return n;for(let t of n.keys())if(t!==S&&e.startsWith(t))return Oe(n.get(t),e.slice(t.length))},xe=(n,e)=>{let t=e.length;e:for(let s=0;n&&s<t;){for(let o of n.keys())if(o!==S&&e[s]===o[0]){let u=Math.min(t-s,o.length),a=1;for(;a<u&&e[s+a]===o[a];)++a;let I=n.get(o);if(a===o.length)n=I;else{let p=new Map;p.set(o.slice(a),I),n.set(e.slice(s,s+a),p),n.delete(o),n=p}s+=a;continue e}let r=new Map;return n.set(e.slice(s),r),r}return n},Gs=(n,e)=>{let[t,s]=se(n,e);if(t!==void 0){if(t.delete(S),t.size===0)nn(s);else if(t.size===1){let[r,o]=t.entries().next().value;tn(s,r,o)}}},nn=n=>{if(n.length===0)return;let[e,t]=Be(n);if(e.delete(t),e.size===0)nn(n.slice(0,-1));else if(e.size===1){let[s,r]=e.entries().next().value;s!==S&&tn(n.slice(0,-1),s,r)}},tn=(n,e,t)=>{if(n.length===0)return;let[s,r]=Be(n);s.set(r+e,t),s.delete(r)},Be=n=>n[n.length-1],be="or",sn="and",Js="and_not",$=class n{constructor(e){if(e?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');let t=e.autoVacuum==null||e.autoVacuum===!0?we:e.autoVacuum;this._options={...ke,...e,autoVacuum:t,searchOptions:{...Je,...e.searchOptions||{}},autoSuggestOptions:{...Ys,...e.autoSuggestOptions||{}}},this._index=new X,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Ae,this.addFields(this._options.fields)}add(e){let{extractField:t,tokenize:s,processTerm:r,fields:o,idField:u}=this._options,a=t(e,u);if(a==null)throw new Error(`MiniSearch: document does not have ID field "${u}"`);if(this._idToShortId.has(a))throw new Error(`MiniSearch: duplicate ID ${a}`);let I=this.addDocumentId(a);this.saveStoredFields(I,e);for(let p of o){let l=t(e,p);if(l==null)continue;let d=s(l.toString(),p),m=this._fieldIds[p],T=new Set(d).size;this.addFieldLength(I,m,this._documentCount-1,T);for(let h of d){let y=r(h,p);if(Array.isArray(y))for(let x of y)this.addTerm(m,I,x);else y&&this.addTerm(m,I,y)}}}addAll(e){for(let t of e)this.add(t)}addAllAsync(e,t={}){let{chunkSize:s=10}=t,r={chunk:[],promise:Promise.resolve()},{chunk:o,promise:u}=e.reduce(({chunk:a,promise:I},p,l)=>(a.push(p),(l+1)%s===0?{chunk:[],promise:I.then(()=>new Promise(d=>setTimeout(d,0))).then(()=>this.addAll(a))}:{chunk:a,promise:I}),r);return u.then(()=>this.addAll(o))}remove(e){let{tokenize:t,processTerm:s,extractField:r,fields:o,idField:u}=this._options,a=r(e,u);if(a==null)throw new Error(`MiniSearch: document does not have ID field "${u}"`);let I=this._idToShortId.get(a);if(I==null)throw new Error(`MiniSearch: cannot remove document with ID ${a}: it is not in the index`);for(let p of o){let l=r(e,p);if(l==null)continue;let d=t(l.toString(),p),m=this._fieldIds[p],T=new Set(d).size;this.removeFieldLength(I,m,this._documentCount,T);for(let h of d){let y=s(h,p);if(Array.isArray(y))for(let x of y)this.removeTerm(m,I,x);else y&&this.removeTerm(m,I,y)}}this._storedFields.delete(I),this._documentIds.delete(I),this._idToShortId.delete(a),this._fieldLength.delete(I),this._documentCount-=1}removeAll(e){if(e)for(let t of e)this.remove(t);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new X,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){let t=this._idToShortId.get(e);if(t==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(t),this._storedFields.delete(t),(this._fieldLength.get(t)||[]).forEach((s,r)=>{this.removeFieldLength(t,r,this._documentCount,s)}),this._fieldLength.delete(t),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;let{minDirtFactor:e,minDirtCount:t,batchSize:s,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:s,batchWait:r},{minDirtCount:t,minDirtFactor:e})}discardAll(e){let t=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(let s of e)this.discard(s)}finally{this._options.autoVacuum=t}this.maybeAutoVacuum()}replace(e){let{idField:t,extractField:s}=this._options,r=s(e,t);this.discard(r),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,t){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&t,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{let s=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=Ae,this.performVacuuming(e,s)}),this._enqueuedVacuum)):this.vacuumConditionsMet(t)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}async performVacuuming(e,t){let s=this._dirtCount;if(this.vacuumConditionsMet(t)){let r=e.batchSize||Se.batchSize,o=e.batchWait||Se.batchWait,u=1;for(let[a,I]of this._index){for(let[p,l]of I)for(let[d]of l)this._documentIds.has(d)||(l.size<=1?I.delete(p):l.delete(d));this._index.get(a).size===0&&this._index.delete(a),u%r===0&&await new Promise(p=>setTimeout(p,o)),u+=1}this._dirtCount-=s}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:t,minDirtFactor:s}=e;return t=t||we.minDirtCount,s=s||we.minDirtFactor,this.dirtCount>=t&&this.dirtFactor>=s}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){let t=this._idToShortId.get(e);if(t!=null)return this._storedFields.get(t)}search(e,t={}){let{searchOptions:s}=this._options,r={...s,...t},o=this.executeQuery(e,t),u=[];for(let[a,{score:I,terms:p,match:l}]of o){let d=p.length||1,m={id:this._documentIds.get(a),score:I*d,terms:Object.keys(l),queryTerms:p,match:l};Object.assign(m,this._storedFields.get(a)),(r.filter==null||r.filter(m))&&u.push(m)}return e===n.wildcard&&r.boostDocument==null||u.sort(He),u}autoSuggest(e,t={}){t={...this._options.autoSuggestOptions,...t};let s=new Map;for(let{score:o,terms:u}of this.search(e,t)){let a=u.join(" "),I=s.get(a);I!=null?(I.score+=o,I.count+=1):s.set(a,{score:o,terms:u,count:1})}let r=[];for(let[o,{score:u,terms:a,count:I}]of s)r.push({suggestion:o,terms:a,score:u/I});return r.sort(He),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),t)}static async loadJSONAsync(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),t)}static getDefault(e){if(ke.hasOwnProperty(e))return ge(ke,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,t){let{index:s,documentIds:r,fieldLength:o,storedFields:u,serializationVersion:a}=e,I=this.instantiateMiniSearch(e,t);I._documentIds=ne(r),I._fieldLength=ne(o),I._storedFields=ne(u);for(let[p,l]of I._documentIds)I._idToShortId.set(l,p);for(let[p,l]of s){let d=new Map;for(let m of Object.keys(l)){let T=l[m];a===1&&(T=T.ds),d.set(parseInt(m,10),ne(T))}I._index.set(p,d)}return I}static async loadJSAsync(e,t){let{index:s,documentIds:r,fieldLength:o,storedFields:u,serializationVersion:a}=e,I=this.instantiateMiniSearch(e,t);I._documentIds=await te(r),I._fieldLength=await te(o),I._storedFields=await te(u);for(let[l,d]of I._documentIds)I._idToShortId.set(d,l);let p=0;for(let[l,d]of s){let m=new Map;for(let T of Object.keys(d)){let h=d[T];a===1&&(h=h.ds),m.set(parseInt(T,10),await te(h))}++p%1e3===0&&await rn(0),I._index.set(l,m)}return I}static instantiateMiniSearch(e,t){let{documentCount:s,nextId:r,fieldIds:o,averageFieldLength:u,dirtCount:a,serializationVersion:I}=e;if(I!==1&&I!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");let p=new n(t);return p._documentCount=s,p._nextId=r,p._idToShortId=new Map,p._fieldIds=o,p._avgFieldLength=u,p._dirtCount=a||0,p._index=new X,p}executeQuery(e,t={}){if(e===n.wildcard)return this.executeWildcardQuery(t);if(typeof e!="string"){let m={...t,...e,queries:void 0},T=e.queries.map(h=>this.executeQuery(h,m));return this.combineResults(T,m.combineWith)}let{tokenize:s,processTerm:r,searchOptions:o}=this._options,u={tokenize:s,processTerm:r,...o,...t},{tokenize:a,processTerm:I}=u,d=a(e).flatMap(m=>I(m)).filter(m=>!!m).map(Zs(u)).map(m=>this.executeQuerySpec(m,u));return this.combineResults(d,u.combineWith)}executeQuerySpec(e,t){let s={...this._options.searchOptions,...t},r=(s.fields||this._options.fields).reduce((y,x)=>({...y,[x]:ge(s.boost,x)||1}),{}),{boostDocument:o,weights:u,maxFuzzy:a,bm25:I}=s,{fuzzy:p,prefix:l}={...Je.weights,...u},d=this._index.get(e.term),m=this.termResults(e.term,e.term,1,e.termBoost,d,r,o,I),T,h;if(e.prefix&&(T=this._index.atPrefix(e.term)),e.fuzzy){let y=e.fuzzy===!0?.2:e.fuzzy,x=y<1?Math.min(a,Math.round(e.term.length*y)):y;x&&(h=this._index.fuzzyGet(e.term,x))}if(T)for(let[y,x]of T){let g=y.length-e.term.length;if(!g)continue;h?.delete(y);let k=l*y.length/(y.length+.3*g);this.termResults(e.term,y,k,e.termBoost,x,r,o,I,m)}if(h)for(let y of h.keys()){let[x,g]=h.get(y);if(!g)continue;let k=p*y.length/(y.length+g);this.termResults(e.term,y,k,e.termBoost,x,r,o,I,m)}return m}executeWildcardQuery(e){let t=new Map,s={...this._options.searchOptions,...e};for(let[r,o]of this._documentIds){let u=s.boostDocument?s.boostDocument(o,"",this._storedFields.get(r)):1;t.set(r,{score:u,terms:[],match:{}})}return t}combineResults(e,t=be){if(e.length===0)return new Map;let s=t.toLowerCase(),r=Xs[s];if(!r)throw new Error(`Invalid combination operator: ${t}`);return e.reduce(r)||new Map}toJSON(){let e=[];for(let[t,s]of this._index){let r={};for(let[o,u]of s)r[o]=Object.fromEntries(u);e.push([t,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,t,s,r,o,u,a,I,p=new Map){if(o==null)return p;for(let l of Object.keys(u)){let d=u[l],m=this._fieldIds[l],T=o.get(m);if(T==null)continue;let h=T.size,y=this._avgFieldLength[m];for(let x of T.keys()){if(!this._documentIds.has(x)){this.removeTerm(m,x,t),h-=1;continue}let g=a?a(this._documentIds.get(x),t,this._storedFields.get(x)):1;if(!g)continue;let k=T.get(x),R=this._fieldLength.get(x)[m],j=Qs(k,h,this._documentCount,R,y,I),Z=s*r*d*g*j,_=p.get(x);if(_){_.score+=Z,er(_.terms,e);let M=ge(_.match,t);M?M.push(l):_.match[t]=[l]}else p.set(x,{score:Z,terms:[e],match:{[t]:[l]}})}}return p}addTerm(e,t,s){let r=this._index.fetch(s,Qe),o=r.get(e);if(o==null)o=new Map,o.set(t,1),r.set(e,o);else{let u=o.get(t);o.set(t,(u||0)+1)}}removeTerm(e,t,s){if(!this._index.has(s)){this.warnDocumentChanged(t,e,s);return}let r=this._index.fetch(s,Qe),o=r.get(e);o==null||o.get(t)==null?this.warnDocumentChanged(t,e,s):o.get(t)<=1?o.size<=1?r.delete(e):o.delete(t):o.set(t,o.get(t)-1),this._index.get(s).size===0&&this._index.delete(s)}warnDocumentChanged(e,t,s){for(let r of Object.keys(this._fieldIds))if(this._fieldIds[r]===t){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${s}" was not present in field "${r}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){let t=this._nextId;return this._idToShortId.set(e,t),this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t}addFields(e){for(let t=0;t<e.length;t++)this._fieldIds[e[t]]=t}addFieldLength(e,t,s,r){let o=this._fieldLength.get(e);o==null&&this._fieldLength.set(e,o=[]),o[t]=r;let a=(this._avgFieldLength[t]||0)*s+r;this._avgFieldLength[t]=a/(s+1)}removeFieldLength(e,t,s,r){if(s===1){this._avgFieldLength[t]=0;return}let o=this._avgFieldLength[t]*s-r;this._avgFieldLength[t]=o/(s-1)}saveStoredFields(e,t){let{storeFields:s,extractField:r}=this._options;if(s==null||s.length===0)return;let o=this._storedFields.get(e);o==null&&this._storedFields.set(e,o={});for(let u of s){let a=r(t,u);a!==void 0&&(o[u]=a)}}};$.wildcard=Symbol("*");var ge=(n,e)=>Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0,Xs={[be]:(n,e)=>{for(let t of e.keys()){let s=n.get(t);if(s==null)n.set(t,e.get(t));else{let{score:r,terms:o,match:u}=e.get(t);s.score=s.score+r,s.match=Object.assign(s.match,u),Xe(s.terms,o)}}return n},[sn]:(n,e)=>{let t=new Map;for(let s of e.keys()){let r=n.get(s);if(r==null)continue;let{score:o,terms:u,match:a}=e.get(s);Xe(r.terms,u),t.set(s,{score:r.score+o,terms:r.terms,match:Object.assign(r.match,a)})}return t},[Js]:(n,e)=>{for(let t of e.keys())n.delete(t);return n}},Hs={k:1.2,b:.7,d:.5},Qs=(n,e,t,s,r,o)=>{let{k:u,b:a,d:I}=o;return Math.log(1+(t-e+.5)/(e+.5))*(I+n*(u+1)/(n+u*(1-a+a*s/r)))},Zs=n=>(e,t,s)=>{let r=typeof n.fuzzy=="function"?n.fuzzy(e,t,s):n.fuzzy||!1,o=typeof n.prefix=="function"?n.prefix(e,t,s):n.prefix===!0,u=typeof n.boostTerm=="function"?n.boostTerm(e,t,s):1;return{term:e,fuzzy:r,prefix:o,termBoost:u}},ke={idField:"id",extractField:(n,e)=>n[e],tokenize:n=>n.split(nr),processTerm:n=>n.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(n,e)=>{typeof console?.[n]=="function"&&console[n](e)},autoVacuum:!0},Je={combineWith:be,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Hs},Ys={combineWith:sn,prefix:(n,e,t)=>e===t.length-1},Se={batchSize:1e3,batchWait:10},Ae={minDirtFactor:.1,minDirtCount:20},we={...Se,...Ae},er=(n,e)=>{n.includes(e)||n.push(e)},Xe=(n,e)=>{for(let t of e)n.includes(t)||n.push(t)},He=({score:n},{score:e})=>e-n,Qe=()=>new Map,ne=n=>{let e=new Map;for(let t of Object.keys(n))e.set(parseInt(t,10),n[t]);return e},te=async n=>{let e=new Map,t=0;for(let s of Object.keys(n))e.set(parseInt(s,10),n[s]),++t%1e3===0&&await rn(0);return e},rn=n=>new Promise(e=>setTimeout(e,n)),nr=/[\n\r\p{Z}\p{P}]+/u;var Ee;function D(n){return{lang:n?.lang??Ee?.lang,message:n?.message,abortEarly:n?.abortEarly??Ee?.abortEarly,abortPipeEarly:n?.abortPipeEarly??Ee?.abortPipeEarly}}var tr;function un(n){return tr?.get(n)}var sr;function on(n){return sr?.get(n)}var rr;function an(n,e){return rr?.get(n)?.get(e)}function A(n){let e=typeof n;return e==="string"?`"${n}"`:e==="number"||e==="bigint"||e==="boolean"?`${n}`:e==="object"||e==="function"?(n&&Object.getPrototypeOf(n)?.constructor?.name)??"null":e}function i(n,e,t,s,r){let o=r&&"input"in r?r.input:t.value,u=r?.expected??n.expects??null,a=r?.received??A(o),I={kind:n.kind,type:n.type,input:o,expected:u,received:a,message:`Invalid ${e}: ${u?`Expected ${u} but r`:"R"}eceived ${a}`,requirement:n.requirement,path:r?.path,issues:r?.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},p=n.kind==="schema",l=r?.message??n.message??an(n.reference,I.lang)??(p?on(I.lang):null)??s.message??un(I.lang);l!==void 0&&(I.message=typeof l=="function"?l(I):l),p&&(t.typed=!1),t.issues?t.issues.push(I):t.issues=[I]}function f(n){return{version:1,vendor:"valibot",validate(e){return n["~run"]({value:e},D())}}}function L(n,e){return Object.hasOwn(n,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}function b(n,e){let t=[...new Set(n)];return t.length>1?`(${t.join(` ${e} `)})`:t[0]??"never"}function Pe(n){if(n.path){let e="";for(let t of n.path)if(typeof t.key=="string"||typeof t.key=="number")e?e+=`.${t.key}`:e+=t.key;else return null;return e}return null}var v=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function E(n,e,t){return typeof n.fallback=="function"?n.fallback(e,t):n.fallback}function pn(n){let e={};for(let t of n)if(t.path){let s=Pe(t);s?(e.nested||(e.nested={}),e.nested[s]?e.nested[s].push(t.message):e.nested[s]=[t.message]):e.other?e.other.push(t.message):e.other=[t.message]}else e.root?e.root.push(t.message):e.root=[t.message];return e}function w(n,e,t){return typeof n.default=="function"?n.default(e,t):n.default}function je(n,e){return{kind:"schema",type:"array",reference:je,expects:"Array",async:!1,item:n,message:e,get"~standard"(){return f(this)},"~run"(t,s){let r=t.value;if(Array.isArray(r)){t.typed=!0,t.value=[];for(let o=0;o<r.length;o++){let u=r[o],a=this.item["~run"]({value:u},s);if(a.issues){let I={type:"array",origin:"value",input:r,key:o,value:u};for(let p of a.issues)p.path?p.path.unshift(I):p.path=[I],t.issues?.push(p);if(t.issues||(t.issues=a.issues),s.abortEarly){t.typed=!1;break}}a.typed||(t.typed=!1),t.value.push(a.value)}}else i(this,"type",t,s);return t}}}function F(n){return{kind:"schema",type:"boolean",reference:F,expects:"boolean",async:!1,message:n,get"~standard"(){return f(this)},"~run"(e,t){return typeof e.value=="boolean"?e.typed=!0:i(this,"type",e,t),e}}}function _e(n,e){let t=[];for(let s in n)(`${+s}`!==s||typeof n[s]!="string"||!Object.is(n[n[s]],+s))&&t.push(n[s]);return{kind:"schema",type:"enum",reference:_e,expects:b(t.map(A),"|"),async:!1,enum:n,options:t,message:e,get"~standard"(){return f(this)},"~run"(s,r){return this.options.includes(s.value)?s.typed=!0:i(this,"type",s,r),s}}}function q(n){return{kind:"schema",type:"number",reference:q,expects:"number",async:!1,message:n,get"~standard"(){return f(this)},"~run"(e,t){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:i(this,"type",e,t),e}}}function O(n,e){return{kind:"schema",type:"optional",reference:O,expects:`(${n.expects} | undefined)`,async:!1,wrapped:n,default:e,get"~standard"(){return f(this)},"~run"(t,s){return t.value===void 0&&(this.default!==void 0&&(t.value=w(this,t,s)),t.value===void 0)?(t.typed=!0,t):this.wrapped["~run"](t,s)}}}function re(n,e){return{kind:"schema",type:"picklist",reference:re,expects:b(n.map(A),"|"),async:!1,options:n,message:e,get"~standard"(){return f(this)},"~run"(t,s){return this.options.includes(t.value)?t.typed=!0:i(this,"type",t,s),t}}}function qe(n,e,t){return{kind:"schema",type:"record",reference:qe,expects:"Object",async:!1,key:n,value:e,message:t,get"~standard"(){return f(this)},"~run"(s,r){let o=s.value;if(o&&typeof o=="object"){s.typed=!0,s.value={};for(let u in o)if(L(o,u)){let a=o[u],I=this.key["~run"]({value:u},r);if(I.issues){let l={type:"object",origin:"key",input:o,key:u,value:a};for(let d of I.issues)d.path=[l],s.issues?.push(d);if(s.issues||(s.issues=I.issues),r.abortEarly){s.typed=!1;break}}let p=this.value["~run"]({value:a},r);if(p.issues){let l={type:"object",origin:"value",input:o,key:u,value:a};for(let d of p.issues)d.path?d.path.unshift(l):d.path=[l],s.issues?.push(d);if(s.issues||(s.issues=p.issues),r.abortEarly){s.typed=!1;break}}(!I.typed||!p.typed)&&(s.typed=!1),I.typed&&(s.value[I.value]=p.value)}}else i(this,"type",s,r);return s}}}function ue(n,e){return{kind:"schema",type:"strict_object",reference:ue,expects:"Object",async:!1,entries:n,message:e,get"~standard"(){return f(this)},"~run"(t,s){let r=t.value;if(r&&typeof r=="object"){t.typed=!0,t.value={};for(let o in this.entries){let u=this.entries[o];if(o in r||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){let a=o in r?r[o]:w(u),I=u["~run"]({value:a},s);if(I.issues){let p={type:"object",origin:"value",input:r,key:o,value:a};for(let l of I.issues)l.path?l.path.unshift(p):l.path=[p],t.issues?.push(l);if(t.issues||(t.issues=I.issues),s.abortEarly){t.typed=!1;break}}I.typed||(t.typed=!1),t.value[o]=I.value}else if(u.fallback!==void 0)t.value[o]=E(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(i(this,"key",t,s,{input:void 0,expected:`"${o}"`,path:[{type:"object",origin:"key",input:r,key:o,value:r[o]}]}),s.abortEarly))break}if(!t.issues||!s.abortEarly){for(let o in r)if(!(o in this.entries)){i(this,"key",t,s,{input:o,expected:"never",path:[{type:"object",origin:"key",input:r,key:o,value:r[o]}]});break}}}else i(this,"type",t,s);return t}}}function oe(n){return{kind:"schema",type:"string",reference:oe,expects:"string",async:!1,message:n,get"~standard"(){return f(this)},"~run"(e,t){return typeof e.value=="string"?e.typed=!0:i(this,"type",e,t),e}}}function ie(n,e,t){let s=n["~run"]({value:e},D(t));if(s.issues)throw new v(s.issues);return s.value}function De(n,e,t){let s=n["~run"]({value:e},D(t));return{typed:s.typed,success:!s.issues,output:s.value,issues:s.issues}}var ae=(r=>(r.Disabled="disabled",r.Day="day",r.Week="week",r.Month="month",r))(ae||{}),mr='/[|\\t\\n\\r\\^"= -#%-*,.`\\/<>:;?@[-\\]_{}\\u00A0\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u1680\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2000-\\u200A\\u2010-\\u2029\\u202F-\\u2043\\u2045-\\u2051\\u2053-\\u205F\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u3000-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/'.slice(1,-1),In=new RegExp(`${mr}+`,"u"),mn=/[|\[\]\(\)<>\{\} \t\n\r]/u;var cn=!1,H=null,fn=ue({content:O(q(),1),basename:O(q(),10),displayName:O(q(),10),directory:O(q(),7),aliases:O(q(),1),tags:O(q(),1)}),dn=ue({weights:O(fn,ie(fn,{})),weightCustomProperties:O(qe(oe(),q()),{}),recencyBoost:O(_e(ae),"disabled"),downrankedFoldersFilters:O(je(oe()),[]),ignoreDiacritics:O(F(),!0),ignoreArabicDiacritics:O(F(),!1),tokenizeUrls:O(F(),!0),splitCamelCase:O(F(),!0),fuzziness:O(re(["0","1","2"]),"1"),renderLineReturnInExcerpts:O(F(),!0)});async function W(){if(H)return H;let n=await ee.getConfig("silversearch",{}),e=De(dn,n);if(e.success)H=e.output;else{if(!cn){let t=Object.entries(pn(e.issues).nested).map(([s,r])=>`${r.join(" & ")} in "${s}"`).join("; ");await B.flashNotification(`Silersearch - There was an error in your CONFIG: ${t}`),cn=!0}H=ie(dn,{})}return H}async function ln(){return await B.getUiOption("customStyles")}var cr=["\\u30FC","\\u309A","\\u3099"],fr=cr.join("|"),dr=new RegExp(`(?!${fr})\\p{Diacritic}`,"gu");function Tn(n){return n.replace(/(\*|_)+(.+?)(\*|_)+/g,(e,t,s)=>s)}function We(n){return/[a-z][A-Z]/.test(n)?n.replace(/([a-z](?=[A-Z]))/g,"$1 ").split(" ").filter(t=>t):[]}function Ce(n){return n.includes("-")?n.split("-").filter(e=>e):[]}function C(n,e=!1){if(n==null)return"";if(e){n=n.replace(/([^\u0621-\u063A\u0641-\u064A\u0660-\u0669a-zA-Z 0-9])/g,"").replace(/(آ|إ|أ)/g,"\u0627").replace(/(ة)/g,"\u0647").replace(/(ئ|ؤ)/g,"\u0621").replace(/(ى)/g,"\u064A");for(let t=0;t<10;t++)n.replace(String.fromCharCode(1632+t),String.fromCharCode(48+t))}return n=n.replaceAll("`","[__silversearch__backtick__]"),n=n.replaceAll("^","[__silversearch__caret__]"),n=n.normalize("NFD").replace(dr,"").normalize("NFC"),n=n.replaceAll("[__silversearch__backtick__]","`"),n=n.replaceAll("[__silversearch__caret__]","^"),n}function yn(n){let e=[],t=-1,s=0;for(;++s<100;){let r=lr(n,t,300);if(!r.length)break;t=r.at(-1).offset,e.push(r)}return e}function lr(n,e,t){let s=n.find(r=>r.offset>e);return s?n.filter(r=>r.offset>e&&r.offset<=s.offset+t):[]}var Ne=ze(An());function Bn(n,e){try{let t=En(n),s=[];if(e.tokenizeUrls)try{s=(0,Ne.extractMdLinks)(n).map(o=>o.href)}catch(o){console.log("[Silversearch] Error extracting urls",o)}let r=Pn(n,{skipChs:!0});return r=[...r.flatMap(o=>[o,...Ce(o),...We(o)]),...t],s.length&&(r=[...r,...s]),r=[...new Set(r)],r}catch(t){return console.error("[Silversearch] Error tokenizing text, skipping document",t),[]}}function bn(n){let e=(0,Ne.extractMdLinks)(n).map(s=>s.href);n=e.reduce((s,r)=>s.replace(r,""),n);let t=[...Pn(n),...e].filter(Boolean);return{combineWith:"OR",queries:[{combineWith:"AND",queries:t},{combineWith:"AND",queries:En(n).filter(Boolean)},{combineWith:"AND",queries:t.flatMap(Ce)},{combineWith:"AND",queries:t.flatMap(We)}]}}function En(n,{skipChs:e=!1}={}){let t=n.split(mn);return e?t:t}function Pn(n,{skipChs:e=!1}={}){let t=n.split(In);return e?t:t}function Mn(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function br(n){if(!n.length)return/^$/g;n.sort((t,s)=>s.length-t.length);let e=`(${n.map(t=>`\\b${Mn(t)}\\b|${Mn(t)}`).join("|")})`;return new RegExp(`${e}`,"gui")}async function Le(n,e,t){let s=await W();e=e.map(vn);let r=br(e),o=n;s.ignoreDiacritics&&(n=C(n,s.ignoreArabicDiacritics));let u=new Date().getTime(),a=null,I=[],p=0;for(;(a=r.exec(n))!==null&&!(++p>=100||new Date().getTime()-u>50);){let l=a.index,d=l+a[0].length,m=o.substring(l,d).trim();m&&a.index>=0&&I.push({match:m,offset:a.index})}if(t&&(t.query.text.length>1||t.getExactTerms().length>0)){let l=n.indexOf(t.getBestStringForExcerpt());l>-1&&I.find(d=>d.offset===l)&&I.unshift({offset:l,match:t.getBestStringForExcerpt()})}return I}async function Fe(n,e){let t=await W();try{let s=e??-1,r=Math.max(0,s-100),o=Math.min(n.length,s+300);if(s>-1?n=(r>0?"\u2026":"")+n.slice(r,o).trim()+(o<n.length-1?"\u2026":""):n=n.slice(0,300),t.renderLineReturnInExcerpts){let u=new RegExp(/(?:\r\n|\r|\n)/g);n=n.split(u).filter(I=>I).join(`
`);let a=n.lastIndexOf(`
`,s-r);a>0&&(n=n.slice(a))}return n=vn(n),t.renderLineReturnInExcerpts&&(n=n.trim().replaceAll(`
`,"<br>")),{excerpt:n,offset:e}}catch(s){return await B.flashNotification("Silversearch - Error while creating excerpt, see developer console","error"),console.error("[Silversearch] Error while creating excerpt",s),{excerpt:"",offset:0}}}function vn(n){return n.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}var Q=class n{minisearch;documentCache;constructor(e){this.minisearch=new $(n.getOptions(e)),this.documentCache=new Map}async loadFromCache(e){let t=await N.get("silversearch-cache");return!t||typeof t!="string"?(console.log("[Silversearch] Couldn't find cache"),await N.del("silversearch-cache"),!1):(this.minisearch=await $.loadJSONAsync(t,n.getOptions(e)),!0)}static async deleteCache(){await N.del("silversearch-cache")}async writeToCache(){let e=JSON.stringify(this.minisearch);await N.set("silversearch-cache",e)}async fullReindex(){await B.flashNotification("Silversearch - Fully reindexing, this can cause performance problems"),this.minisearch.removeAll();let e=await V.listPages();console.log(`[Silversearch] Indexing ${e.length} pages`);let t=await Promise.all(e.map(n.pageMetaToIndexablePage));await this.minisearch.addAllAsync(t),await this.writeToCache(),await B.flashNotification("Silversearch - Full reindex done!")}async indexPage(e){await this.indexPages([e])}async indexPages(e){for(let t of e)try{console.log(`[Silversearch] Indexing ${t}`);let s=await V.getPageMeta(t),r=await n.pageMetaToIndexablePage(s);this.minisearch.has(r.ref)?this.minisearch.replace(r):this.minisearch.add(r)}catch{console.log(`[Silversearch] Failed to index ${t}. Skipping!`)}await this.writeToCache()}async deletePage(e){await this.deletePages([e])}async deletePages(e){for(let t of e)try{this.minisearch.discard(t)}catch{console.log("[Silversearch] Something went wrong. Failed to delete page")}await this.writeToCache()}async search(e,t){let s=await W();if(e.isEmpty())return[];let r={0:0,1:.1,2:.2}[s.fuzziness],o=bn(e.segmentsToStr()),u=this.minisearch.search(o,{prefix:d=>d.length>=t.prefixLength,fuzzy:d=>d.length<=3?0:d.length<=5?r/2:r,boost:{basename:s.weights.basename,aliases:s.weights.aliases,displayName:s.weights.displayName,directory:s.weights.directory,tags:s.weights.tags,unmarkedTags:s.weights.tags},tokenize:d=>[d],boostDocument(d,m,T){if(!T?.lastModified||s.recencyBoost==="disabled")return 1;let h=T?.lastModified,x=(new Date().getTime()-h)/(24*3600*1e3),g={day:-3,week:-.3,month:-.1};return 1+Math.exp(g[s.recencyBoost]*(x/1e3))}});if(e.query.ext?.length&&(u=u.filter(d=>{let m=d.id.includes(".")?"."+d.id.split(".").pop():".md";return e.query.ext?.some(T=>m.startsWith(T.startsWith(".")?T:"."+T))})),e.query.path&&(u=u.filter(d=>e.query.path?.some(m=>d.id.toLowerCase().includes(m.toLowerCase())))),e.query.exclude.path&&(u=u.filter(d=>!e.query.exclude.path?.some(m=>d.id.toLowerCase().includes(m.toLowerCase())))),!u.length)return[];if(t.singleFilePath)return u.filter(d=>d.id===t.singleFilePath);let a=(await Promise.all(u.map(async d=>await this.getCompletePage(d.id)))).filter(d=>!!d),I=e.getTags();for(let d of u){let m=d.id;if(s.downrankedFoldersFilters.length>0){let h=!1;s.downrankedFoldersFilters.forEach(g=>{m.startsWith(g)&&(m===g||m.startsWith(g+"/"))&&(h=!0)}),h&&(d.score/=10);let y=m.split("/"),x=y.length;for(let g=0;g<x;g++){let k=y[g];if(s.downrankedFoldersFilters.includes(k)){d.score/=10;break}}}let T=a.find(h=>h.ref===m)?.metadata;if(T)for(let[h,y]of Object.entries(s.weightCustomProperties)){let x=T[h];x&&d.terms.some(g=>x.includes(g))&&(d.score*=y)}for(let h of I)(d.tags??[]).includes(h)&&(d.score*=100)}u=u.sort((d,m)=>m.score-d.score).slice(0,50);let p=e.getExactTerms();p.length&&(u=u.filter(d=>{let m=a.find(y=>y.ref===d.id),T=m?.ref.toLowerCase()??"",h=(m?.cleanedContent??"").toLowerCase();return p.every(y=>h.includes(y)||C(T,s.ignoreArabicDiacritics).includes(y))}));let l=e.query.exclude.text;return l.length&&(u=u.filter(d=>{let m=(a.find(T=>T.ref===d.id)?.content??"").toLowerCase();return l.every(T=>!m.includes(T))})),u}async getSuggestions(e,t){let s=await this.search(e,{prefixLength:1,singleFilePath:t?.singleFilePath}),r=(await Promise.all(s.map(async u=>await this.getCompletePage(u.id)))).filter(u=>!!u);return(await Promise.all(s.map(async u=>{let a=r.find(T=>T.ref===u.id);if(!a)return console.warn(`[Silversearch] Note "${u.id}" disappeared. Skipping`),null;let I=[...u.terms,...e.getExactTerms(),...e.getTags()],p=await Le(a.content,I,e),l=await Le(a.ref,I),d;if(t?.singleFilePath){let T=yn(p),h=e.getExactTerms();h.length&&(T=T.filter(x=>h.every(g=>x.some(k=>k.match.includes(g)))));let y=T.map(x=>Math.round(x.at(0).offset));d=await Promise.all(y.map(x=>Fe(a?.content??"",x)))}else d=[await Fe(a.content,p[0]?.offset??-1)];return{score:u.score,foundWords:I,matches:p,matchesName:l,excerpts:d,...a}}))).filter(u=>u!==null)}async getCompletePage(e){let t;try{t=await V.getPageMeta(e)}catch{return console.log("[Silversearch] Couldn't find the specified page: ",e),null}let s=this.documentCache.get(e);if(s&&new Date(t.lastModified).getTime()===s.lastModified)return s;let r=await n.pageMetaToIndexablePage(t),o=Object.fromEntries(Object.entries(t).filter(([a,I])=>!["ref","tag","tags","itags","name","created","lastModified","perm","lastOpened","pageDecoration","aliases"].includes(a))),u={...r,cleanedContent:Tn(C(r.content)),metadata:o};return this.documentCache.set(e,u),u}static async pageMetaToIndexablePage(e){let t=await V.readPage(e.ref);return{ref:e.name,basename:e.name.split("/").pop()??e.name,directory:e.name.split("/").splice(-1).join()??"",aliases:e.aliases??[],displayName:e.displayName??"",tags:e.tags?.map(s=>"#"+s)??[],unmarkedTags:e.tags??[],content:t,lastModified:new Date(e.lastModified).getTime()}}static getOptions(e){return{tokenize:t=>Bn(t,{tokenizeUrls:e.tokenizeUrls}),processTerm:t=>(e.ignoreDiacritics?C(t,e.ignoreArabicDiacritics):t).toLowerCase(),idField:"ref",fields:["content","basename","directory","aliases","displayName"],storeFields:["lastModified","tags"]}}};var qn=ze(_n()),Ke=["ext","path"],me=class{query;#e;constructor(e="",t){t.ignoreDiacritics&&(e=C(e,t.ignoreArabicDiacritics));let s=(0,qn.parse)(e.toLowerCase(),{tokenize:!0,keywords:Ke});s.text=s.text??[],s.exclude=s.exclude??{text:[]},s.exclude.text=s.exclude.text??[],Array.isArray(s.exclude.text)||(s.exclude.text=[s.exclude.text]),s.exclude.text=s.exclude.text.filter(o=>o.length);for(let o of Ke){let u=s[o];u&&(s[o]=Array.isArray(u)?u:[u]);let a=s.exclude[o];a&&(s.exclude[o]=Array.isArray(a)?a:[a])}this.query=s;let r=this.query.text.filter(o=>o.startsWith(".")).map(o=>o.slice(1));this.query.ext=[...new Set([...r,...this.query.ext??[]])],this.query.text=this.query.text.filter(o=>!o.startsWith(".")),this.#e=e.match(/"([^"]+)"/g)?.map(o=>o.replace(/"/g,""))??[]}isEmpty(){for(let e of Ke)if(this.query[e]?.length||this.query.text.length)return!1;return!0}segmentsToStr(){return this.query.text.join(" ")}getTags(){return this.query.text.filter(e=>e.startsWith("#"))}getTagsWithoutHashtag(){return this.getTags().map(e=>e.replace(/^#/,""))}getExactTerms(){return[...new Set([...this.query.text.filter(e=>e.split(" ").length>1),...this.#e].map(e=>e.toLowerCase()))]}getBestStringForExcerpt(){return this.#e.length?this.#e.sort((e,t)=>t.length-e.length)[0]??"":this.segmentsToStr()}};var Dn="7189626";var P=null,z=[];async function $e(){if(P)return;let n=await W();P=new Q(n),await P.loadFromCache(n)?z.length&&(await P.indexPages(z.filter(t=>t.action==="index").map(t=>t.ref)),await P.deletePages(z.filter(t=>t.action==="delete").map(t=>t.ref)),z=[]):await P.fullReindex()}async function Wn(n=""){let e=await ln();await B.showPanel("modal",1,e?`<style>${e}</style>`+he:he,n?`globalThis.DEFAULT_QUERY = "${n}";`+ye:ye)}async function Cn(){await c("silversearch.openSearch")}async function Vn(){await $e()}async function Nn({name:n}){P?await P.indexPage(n):z.push({action:"index",ref:n})}async function Ln(n){P?await P.deletePage(n):z.push({action:"delete",ref:n})}async function Fn(n,e){await $e();let t=await W(),s=new me(n,{ignoreDiacritics:t.ignoreDiacritics,ignoreArabicDiacritics:t.ignoreArabicDiacritics});return P.getSuggestions(s,{singleFilePath:e})}async function Kn(){await Q.deleteCache(),P=null,await $e()}async function $n(){await B.flashNotification(`Silversearch - Version ${Dn}`)}var zn={startSearch:Cn,getVersion:$n,openSearch:Wn,reindex:Kn,init:Vn,index:Nn,deleted:Ln,search:Fn},Un={name:"silversearch",functions:{startSearch:{path:"./worker/silversearch.ts:startSearch",command:{name:"Silversearch: Search",key:"Ctrl-s",mac:"Cmd-s"}},getVersion:{path:"./worker/silversearch.ts:showVersion",command:{name:"Silversearch: Print Version"}},openSearch:{path:"./worker/silversearch.ts:openSearch",syscall:"silversearch.openSearch"},reindex:{path:"./worker/silversearch.ts:reindex",syscall:"silversearch.reindex",command:{name:"Silversearch: Full Reindex"}},init:{path:"./worker/silversearch.ts:init",events:["editor:init"]},index:{path:"./worker/silversearch.ts:index",events:["page:index"]},deleted:{path:"./worker/silversearch.ts:deleted",events:["page:deleted"]},search:{path:"./worker/silversearch.ts:search",syscall:"silversearch.search"}},assets:{}},WE={manifest:Un,functionMapping:zn};Ge(zn,Un,self.postMessage);export{WE as plug};
/*! Bundled license information:

search-query-parser/lib/search-query-parser.js:
  (*!
   * search-query-parser.js
   * Copyright(c) 2014-2019
   * MIT Licensed
   *)
*/
